## å‰è¨€

å¤§å®¶å¥½å•Šï¼Œæˆ‘æ˜¯å’å„¿ğŸ‘¦ï¼Œæ¯å¤©åŠªåŠ›ä¸€ç‚¹ç‚¹ğŸ’ªï¼Œå°±èƒ½å‡èŒåŠ è–ªğŸ’°å½“ä¸Šæ€»ç»ç†å‡ºä»»CEOè¿å¨¶ç™½å¯Œç¾èµ°ä¸Šäººç”Ÿå·…å³°ğŸ—»ï¼Œæƒ³æƒ³è¿˜æœ‰ç‚¹å°æ¿€åŠ¨å‘¢ğŸ˜ã€‚

è¿™æ˜¯æˆ‘çš„ç¬¬13æœŸæ–‡ç« å†…å®¹âœï¼Œå¸Œæœ›èƒ½å¤ŸæŠŠæ¯ä¸€å¤„çŸ¥è¯†ç‚¹ï¼Œè¯´æ˜ç™½ï¼Œï¼ˆå½“ç„¶ï¼Œå¦‚æœå“ªä¸€å¤„ä¸äº†è§£ï¼Œå¯ä»¥åœ¨è¯„è®ºåŒºè¿›è¡Œæ¢è®¨å“¦ï¼ï¼‰â°ï¼Œè®¡æ—¶å¼€å§‹ï¼

å¦‚æœæ‚¨å‘ç°æœ¬æ–‡æœ‰å¸®åŠ©ï¼Œè¯·æ‚¨ç‚¹èµï¼Œæ”¶è—ï¼Œè¯„è®ºï¼Œç•™ä¸‹æ‚¨å­¦ä¹ çš„è„šå°ğŸ‘£ï¼Œæˆ‘å¾ˆä¹æ„è°ˆè®ºğŸ˜ƒ

è¯ä¸å¤šè¯´ï¼Œå¼€å§‹å­¦ä¹ ï¼ï¼ï¼

> æˆ‘ä¼šä¸æ–­ä¿®æ”¹è¿™ç¯‡æ–‡ç« å†…å®¹ï¼Œä¸€èµ·æ¥æ¢è®¨å§ï¼ğŸ˜

### å­¦ä¹ csså¸ƒå±€ğŸ¤£

displayå±æ€§ï¼Œå®ƒæ˜¯cssä¸­æœ€é‡è¦çš„ç”¨äºæ§åˆ¶å¸ƒå±€çš„å±æ€§ï¼Œæ¯ä¸ªå…ƒç´ éƒ½æœ‰ä¸€ä¸ªé»˜è®¤çš„displayå€¼ï¼Œè¿™ä¸å…ƒç´ çš„ç±»å‹æœ‰å…³ï¼Œå¤§å¤šæ•°å…ƒç´ çš„é»˜è®¤å€¼ä¸€èˆ¬æ˜¯blockæˆ–inlineã€‚

- æ¯ä¸ªå…ƒç´ éƒ½æœ‰ä¸€ä¸ªé»˜è®¤çš„display

blockå…ƒç´ å«åšå—çº§å…ƒç´ ï¼›inlineå…ƒç´ å«åšè¡Œå†…å…ƒç´ 

å¸¸ç”¨çš„displayå€¼ï¼Œæœ‰æ—¶å€™ä¸ºnoneï¼Œå®ƒæ˜¯ç”¨æ¥å†ä¸åˆ é™¤å…ƒç´ çš„æƒ…å†µä¸‹éšè—æˆ–æ˜¾ç¤ºï¼Œdisplay:noneã€‚

displayè®¾ç½®æˆnoneå…ƒç´ ä¸ä¼šå æ®å®ƒæœ¬æ¥åº”è¯¥æ˜¾ç¤ºçš„ç©ºé—´ï¼›ä½¿ç”¨visibility:hiddenä¼šå æ®ç©ºé—´ï¼Œåªæ˜¯éšè—äº†ï¼Œå…ƒç´ è¿˜åœ¨ã€‚

positionå±æ€§ï¼šstaticæ˜¯é»˜è®¤å€¼ï¼Œå£è¯€ï¼Œå­ç»çˆ¶ç›¸ã€‚fixedï¼Œä¸€ä¸ªå›ºå®šå®šä½å…ƒç´ ä¼šç›¸å¯¹äºè§†çª—æ¥å®šä½ï¼Œå³ä½¿é¡µé¢æ»šåŠ¨ï¼Œå®ƒä¹Ÿä¼šåœç•™å†ç›¸åŒçš„ä½ç½®ä¸Šã€‚

csså±æ€§ä¸­çš„floatï¼Œfloatå¯å®ç°æ–‡å­—ç¯ç»•å›¾ç‰‡æ•ˆæœï¼š

```css
img {
    float: right;
    margin: 0 0 1em 1em;
}
```

clearå±æ€§å¯ä»¥ç”¨äºè¢«æ§åˆ¶çš„æµ®åŠ¨å…ƒç´ ï¼Œå¦‚æœä¸€ä¸ªç›’å­æ·»åŠ äº†float: leftæµ®åŠ¨ï¼Œå¯ä»¥ä½¿ç”¨clear: leftæ¸…æ¥šå…ƒç´ çš„å‘å·¦æµ®åŠ¨ã€‚

æ¸…æ¥šæµ®åŠ¨ï¼Œclearfix hackï¼Œå¯ä»¥ä½¿ç”¨æ–°çš„cssæ ·å¼ï¼š

```css
.clearfix {
    overflow: auto;
}
```

ç™¾åˆ†æ¯”å®½åº¦ï¼Œç™¾åˆ†æ¯”æ˜¯ä¸€ç§ç›¸å¯¹äºåŒ…å«å—çš„è®¡é‡å•ä½ã€‚

```css
.clearfix {
    float: right;
    width: 50%;
}

nav {
  float: left;
  width: 15%;
}

section {
  margin-left: 15%;
}
```

**å“åº”å¼è®¾è®¡**æ˜¯ä¸€ç§è®©ç½‘ç«™é’ˆå¯¹ä¸åŒçš„æµè§ˆå™¨å’Œè®¾å¤‡â€œå‘ˆç°â€ä¸åŒæ˜¾ç¤ºæ•ˆæœçš„ç­–ç•¥ï¼Œå¯ä»¥è®©ç½‘ç«™åœ¨ä¸åŒæƒ…å†µä¸‹å‘ˆç°å¾ˆå¥½çš„æ•ˆæœã€‚

inline-blockä¸ºè¡Œå†…å—æ ‡ç­¾

```css
.box {
  float: left;
  width: 200px;
  height: 100px;
  margin: 1em;
}
.after-box {
  clear: left;
}

// ç›¸åŒæ•ˆæœ
.box1 {
  display: inline-block;
  width: 200px;
  height: 100px;
  margin: 1em;
}
```

flexboxæ˜¯css3ç§çš„ä¸€ç§æ–°çš„å¸ƒå±€æ¨¡å¼ï¼Œç”¨äºæ»¡è¶³ç°ä»£webçš„å¤æ‚éœ€æ±‚ã€‚

![](https://user-gold-cdn.xitu.io/2020/5/28/1725a9e9af764f27)

```html
<div class="flex-container">
    <div class="flex-item">flex item 1</div>
    <div class="flex-item">flex item 2</div>
</div>

.flex-container {
    display: -webkit-flex;
    display: flex;
    width: 300px;
    height: 240px;
    background-color: Silver;
}

.flex-item {
    background-color: DeepSkyBlue;
    width: 100px;
    height: 100px;
    margin: 5px;
}
```

### JavaScriptå˜é‡ğŸ˜Š

1ï¼ŒIntæ•´å‹
2ï¼ŒFloatæµ®ç‚¹
3ï¼ŒBooleanå¸ƒå°”
4ï¼ŒStringå­—ç¬¦ä¸²
5ï¼ŒArrayæ•°ç»„
6ï¼ŒObjectå¯¹è±¡
7ï¼ŒFunctionå‡½æ•°
8ï¼ŒRegular Expressionæ­£åˆ™

> é©¼å³°å‘½åæ³•ğŸ˜€

- å…¨éƒ¨å°å†™ï¼Œå•è¯ä¸å•è¯é—´ç”¨ä¸‹åˆ’çº¿åˆ†å‰²
- å¤§å°å†™æ··åˆï¼Œå¤§é©¼å³°ï¼Œæ¯ä¸ªå•è¯é¦–å­—æ¯å¤§å†™ï¼Œå°é©¼å³°ï¼Œç¬¬ä¸€ä¸ªå•è¯é¦–å­—æ¯å°å†™ï¼Œå…¶ä»–é¦–å­—æ¯å¤§å†™ã€‚

> è§„åˆ™ğŸ˜

é¦–å­—ç¬¦ï¼Œè‹±æ–‡å­—æ¯æˆ–è€…ä¸‹åˆ’çº¿ï¼›ç»„æˆï¼Œè‹±æ–‡å­—æ¯ï¼Œæ•°å­—ï¼Œä¸‹åˆ’çº¿ï¼›ï¼ˆç¦ç”¨ï¼ŒJavaScriptå…³é”®è¯ä¸ä¿ç•™å­—ï¼‰

> å£°æ˜ğŸ˜ƒ

æ˜¾ç¤ºå£°æ˜ï¼Œä½¿ç”¨varå˜é‡åï¼Œï¼ˆ{æ²¡æœ‰ç±»å‹ï¼Œé‡å¤å£°æ˜ï¼Œéšå¼å£°æ˜ï¼Œä¸å£°æ˜ç›´æ¥å¤åˆ¶}ï¼‰ï¼Œï¼ˆ{å…ˆå£°æ˜ï¼Œåè¯»å†™ï¼Œå…ˆèµ‹å€¼ï¼Œåè¿ç®—}ï¼‰ã€‚

> å˜é‡ç±»å‹ğŸ˜ƒ

å€¼ç±»å‹ï¼Œå ç”¨ç©ºé—´å›ºå®šï¼Œä¿å­˜åœ¨æ ˆä¸­ï¼Œä¿å­˜ä¸å¤åˆ¶çš„æ˜¯å€¼æœ¬èº«ï¼Œä½¿ç”¨typeofæ£€æµ‹æ•°æ®çš„ç±»å‹ï¼ŒåŸºæœ¬ç±»å‹æ•°æ®æ˜¯å€¼ç±»å‹ã€‚

å¼•ç”¨ç±»å‹ï¼Œå ç”¨ç©ºé—´ ä¸å›ºå®šï¼Œä¿å­˜åœ¨å †ä¸­ï¼Œä¿å­˜ä¸å¤åˆ¶çš„æ˜¯æŒ‡å‘å¯¹è±¡çš„ä¸€ä¸ªæŒ‡é’ˆï¼Œä½¿ç”¨instanceofæ£€æµ‹æ•°æ®çš„ç±»å‹ï¼Œä½¿ç”¨new()æ–¹æ³•æ„é€ å‡ºçš„å¯¹è±¡æ˜¯å¼•ç”¨å‹ã€‚

> ä½œç”¨åŸŸğŸ˜„

å…¨å±€å˜é‡ï¼ŒåŒ…æ‹¬ï¼Œåœ¨å‡½æ•°ä½“å¤–å®šä¹‰çš„å˜é‡ï¼Œåœ¨å‡½æ•°ä½“å†…éƒ¨å®šä¹‰çš„æ— varçš„å˜é‡ï¼›è°ƒç”¨ï¼Œåœ¨ä»»ä½•ä½ç½®ã€‚

å±€éƒ¨å˜é‡ï¼ŒåŒ…æ‹¬ï¼Œåœ¨å‡½æ•°å†…éƒ¨ä½¿ç”¨varå£°æ˜çš„å˜é‡ï¼Œå‡½æ•°çš„å‚æ•°å˜é‡ï¼›è°ƒç”¨ï¼Œå½“å‰å‡½æ•°ä½“å†…éƒ¨ã€‚

ä¼˜å…ˆçº§ï¼Œå±€éƒ¨å˜é‡é«˜äºåŒåå…¨å±€å˜é‡ï¼Œå‚æ•°å˜é‡é«˜äºåŒåå…¨å±€å˜é‡ï¼Œå±€éƒ¨å˜é‡é«˜äºåŒåå‚æ•°å˜é‡ã€‚

ç‰¹æ€§ï¼šå¿½ç•¥å—çº§ä½œç”¨åŸŸï¼Œå…¨å±€å˜é‡æ˜¯å…¨å±€å¯¹è±¡çš„å±æ€§ï¼Œå±€éƒ¨å˜é‡æ˜¯è°ƒç”¨å¯¹è±¡çš„å±æ€§ã€‚

ä½œç”¨åŸŸé“¾ï¼Œå†…å±‚å‡½æ•°å¯è®¿é—®å¤–å±‚å‡½æ•°å±€éƒ¨å˜é‡ï¼Œå¤–å±‚å‡½æ•°ä¸èƒ½è®¿é—®å†…å±‚å‡½æ•°å±€éƒ¨å˜é‡ã€‚

å£°æ˜å‘¨æœŸï¼šå…¨å±€å˜é‡ï¼Œé™¤äº†è¢«åˆ é™¤ï¼Œå¦åˆ™ä¸€ç›´åœ¨ï¼Œå±€éƒ¨å˜é‡ï¼Œå£°æ˜èµ·åˆ°å‡½æ•°è¿è¡Œå®Œæ¯•æˆ–æ˜¾ç¤ºåˆ é™¤ã€‚å›æ”¶æœºåˆ¶ï¼Œæ ‡è®°æ¸…æ¥šï¼Œå¼•ç”¨è®¡æ•°ã€‚

### é€»è¾‘è¿ç®—ç¬¦ğŸ˜…

> ï¼é€»è¾‘é

è¿”å›true

```js
ç©ºå­—ç¬¦ä¸²
0
null
NaN
undefined
```

è¿”å›false

```js
å¯¹è±¡
éç©ºå­—ç¬¦ä¸²
é0æ•°å€¼ï¼ˆInfinityï¼‰
```

æ³¨æ„ï¼šé€»è¾‘éï¼Œè¿ç»­ä½¿ç”¨ä¸¤æ¬¡ï¼Œå¯ä»¥å°†ä»»æ„ç±»å‹è½¬ä¸ºå¸ƒå°”å‹å€¼

> &&é€»è¾‘ä¸ğŸ˜†

- å½“ç¬¬ä¸€ä¸ªæ“ä½œæ•°æ˜¯å¯¹è±¡ï¼Œè¿”å›ç¬¬äºŒä¸ªæ“ä½œæ•°
- å½“ç¬¬äºŒä¸ªæ“ä½œæ•°æ˜¯å¯¹è±¡ï¼Œç¬¬ä¸€ä¸ªæ“ä½œæ•°å€¼ä¸ºtrueæ—¶è¿”å›è¯¥å¯¹è±¡
- ä¸¤ä¸ªæ“ä½œæ•°éƒ½æ˜¯å¯¹è±¡ï¼Œè¿”å›ç¬¬äºŒä¸ªæ“ä½œæ•°

1. ä¸€ä¸ªæ“ä½œæ•°ä¸ºnullæ—¶ï¼Œè¿”å›null
2. ä¸€ä¸ªæ“ä½œæ•°ä¸ºNaNæ—¶ï¼Œè¿”å›NaN
3. ä¸€ä¸ªæ“ä½œæ•°ä¸ºundefinedï¼Œè¿”å›undefined

æ³¨æ„ï¼šå½“ç¬¬ä¸€ä¸ªæ“ä½œæ•°çš„å€¼æ—¶falseï¼Œåˆ™ä¸å¯¹ç¬¬äºŒä¸ªæ“ä½œæ•°è¿›è¡Œæ±‚å€¼ã€‚

> é€»è¾‘æˆ– ||ğŸ˜‰

- ç¬¬ä¸€ä¸ªæ“ä½œæ•°æ˜¯å¯¹è±¡ï¼Œè¿”å›ç¬¬ä¸€ä¸ªæ“ä½œæ•°
- ç¬¬ä¸€ä¸ªæ“ä½œæ•°å€¼ä¸ºfalseï¼Œè¿”å›ç¬¬äºŒä¸ªæ“ä½œæ•°
- ä¸¤ä¸ªæ“ä½œæ•°éƒ½æ˜¯å¯¹è±¡ï¼Œè¿”å›ç¬¬ä¸€ä¸ªæ“ä½œæ•°
- ä¸¤ä¸ªæ“ä½œæ•°éƒ½æ˜¯nullï¼Œè¿”å›null
- ä¸¤ä¸ªæ“ä½œæ•°éƒ½æ˜¯NaNï¼Œè¿”å›NaN
- ä¸¤ä¸ªæ“ä½œæ•°éƒ½æ˜¯undefinedï¼Œè¿”å›undefined

æ³¨æ„ï¼šå¦‚æœç¬¬ä¸€ä¸ªæ“ä½œæ•°å€¼ä¸ºtrueï¼Œå°±ä¸ä¼šå¯¹ç¬¬äºŒä¸ªæ“ä½œæ•°æ±‚å€¼ã€‚

### JavaScriptæ•°ç»„

> æ·»åŠ 

push()åœ¨æ•°ç»„æœ«å°¾æ·»åŠ æ•°ç»„
unshift()åœ¨æ•°ç»„å¤´éƒ¨æ·»åŠ å…ƒç´ 
concat()åˆå¹¶ä¸¤ä¸ªæ•°ç»„

> åˆ é™¤

pop()åˆ é™¤å¹¶è¿”å›æ•°å€¼çš„æœ€åä¸€ä¸ªå…ƒç´ 
shift()åˆ é™¤å¹¶è¿”å›æ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ 

é˜Ÿåˆ—æ–¹æ³•ï¼ˆå…ˆè¿›å…ˆå‡ºï¼‰ï¼›æ ˆæ–¹æ³•ï¼ˆåè¿›å…ˆå‡ºï¼‰ã€‚

> splice()å’Œslice()

splice()

- åˆ é™¤ä»»æ„æ•°é‡çš„é¡¹ï¼š1ï¼Œè¦åˆ é™¤çš„èµ·å§‹ä¸‹æ ‡ï¼Œ2ï¼Œè¦åˆ é™¤çš„é¡¹æ•°
- åœ¨æŒ‡å®šä½ç½®æ’å…¥æŒ‡å®šçš„é¡¹ï¼š1ï¼Œèµ·å§‹ä¸‹æ ‡ï¼Œ2ï¼Œ0ï¼ˆä¸åˆ é™¤ä»»ä½•é¡¹ï¼‰ï¼Œ3ï¼Œè¦æ’å…¥çš„é¡¹ã€‚
- æ›¿æ¢ä»»æ„æ•°é‡çš„é¡¹ï¼š1ï¼Œèµ·å§‹ä¸‹æ ‡ï¼Œ2ï¼Œè¦åˆ é™¤çš„é¡¹æ•°ï¼Œ3ï¼Œè¦æ’å…¥çš„é¡¹

splice()æ–¹æ³•ï¼Œæ³¨è§£ï¼Œ**è¯¥æ–¹æ³•ä¼šæ”¹å˜åŸå§‹æ•°ç»„**ã€‚ç”¨äºæ·»åŠ æˆ–åˆ é™¤æ•°ç»„ä¸­çš„å…ƒç´ ã€‚

```js
arrayObject.splice(index,howmany,item1,.....,itemX)

var arr = ['a', 'b', 'c']

arr.splice(2,1) // åˆ é™¤ä¸€ä¸ªï¼Œè¿”å›åˆ é™¤å…ƒç´ çš„æ•°ç»„

['c']

arr.splice(2,0) // åˆ é™¤0ä¸ªï¼Œè¿”å›ç©ºæ•°ç»„

[]

var array = [1,2,3,4,5];
array.splice(3,2);
console.log(array);
// ç»“æœ: [1,2,3]

var myFish = ['angel', 'clown', 'mandarin', 'sturgeon'];
var removed = myFish.splice(2);
// ä»ç¬¬ 2 ä½å¼€å§‹åˆ é™¤æ‰€æœ‰å…ƒç´ 
// è¿ç®—åçš„ myFish: ["angel", "clown"]
// è¢«åˆ é™¤çš„å…ƒç´ : ["mandarin", "sturgeon"]
```

> æ‰€æœ‰ä¸»è¦æµè§ˆå™¨éƒ½æ”¯æŒsplice()

Arrayæ•°ç»„çš„splice()æ–¹æ³•ï¼Œå®ƒçš„ä½œç”¨åˆ é™¤ï¼Œæ’å…¥ï¼Œæ›¿æ¢

æ’å…¥çš„ç”¨æ³•

```js
è¯­æ³•ï¼šarray.splice(starti,0,å€¼1ï¼Œå€¼2...);

// è¡¨ç¤ºè¦åœ¨å“ªä¸ªä½ç½®æ’å…¥ï¼Œ0è¡¨ç¤ºåˆ é™¤0ä¸ªå…ƒç´ ï¼Œå› ä¸ºæ’å…¥å’Œæ›¿æ¢éƒ½æ˜¯ç”±åˆ é™¤åŠŸèƒ½æ‹“å±•çš„ï¼Œå€¼1ï¼Œå€¼2ï¼Œéœ€è¦æ’å…¥çš„å€¼

var array = [1,2,3,4,5];
array.splice(2,0,11,22);

// ç»“æœï¼š[1,2,11,22,3,4,5]
```

æ›¿æ¢çš„ç”¨æ³•

```js
è¯­æ³•:array.splice(starti,n,å€¼1ï¼Œå€¼2);

var array = [1,2,3,4,5];
array.splice(2,2,11,22);

// ç»“æœï¼š[1,2,11,22,5]
```

> slice()åŠŸèƒ½ï¼Œä»å·²æœ‰æ•°ç»„ä¸­é€‰å–éƒ¨åˆ†å…ƒç´ æ„æˆæ–°æ•°ç»„

1. è¿”å›é¡¹çš„èµ·å§‹ä½ç½®
2. è¿”å›é¡¹çš„ç»“æŸä½ç½®

ç‰¹æ€§ï¼Œå¦‚æœæ˜¯è´Ÿæ•°ï¼Œåˆ™ç”¨æ•°ç»„é•¿åº¦åŠ ä¸Šè¯¥å€¼ç¡®å®šä½ç½®ï¼Œå¯ç¤ºä½ç½®å®ä¸ºæ•°ç»„çš„å®é™…ä¸‹æ ‡ï¼Œç»“æŸä½ç½®çš„å®é™…ä¸‹æ ‡ä¸ºç»“æŸæ•°å€¼å‡1ã€‚

Array.prototype.slice()

slice()æ–¹æ³•è¿”å›ä¸€ä¸ªæ–°çš„æ•°ç»„å¯¹è±¡ã€‚**åŸå§‹æ•°ç»„ä¸ä¼šè¢«æ”¹å˜ã€‚**è¿™ä¸€å¯¹è±¡æ˜¯ä¸€ä¸ªç”±beginå’Œendå†³å®šçš„**åŸæ•°ç»„çš„æµ…æ‹·è´ã€‚**

è¡¨æ‰¬ä¸€ä¸‹ï¼š

![](https://user-gold-cdn.xitu.io/2020/6/15/172b7869ec0a4984?w=609&h=191&f=png&s=19053)
```
const animals = ['1', '2', '3', '4', '5'];

console.log(animals.slice(2));
// expected output: Array ["3", "4", "5"]

console.log(animals.slice(2, 4));
// expected output: Array ["3", "4"]

console.log(animals.slice(1, 5));
// expected output: Array ["2", "3", "4", "5"]
```

slice(start,end)ï¼Œä»startå¼€å§‹æˆªå–åˆ°endå•ä¸åŒ…å«endï¼Œè¿”å›å€¼ä¸ºæˆªå–å‡ºæ¥çš„å…ƒç´ çš„é›†åˆ(åªæ˜¯è¿”å›ä¸€ä¸ªæµ…å¤åˆ¶äº†åŸæ•°ç»„ä¸­çš„å…ƒç´ çš„è¦ç»™æ–°æ•°ç»„)

```js
var fruits = ['a', 'b', 'c', 'd', 'e'];
var citrus = fruits.slice(1, 3);

// fruits contains ['a', 'b', 'c', 'd', 'e']
// citrus contains ['b','c']
```

sliceæ–¹æ³•ç”¨ä¸€ä¸ªç±»æ•°ç»„å¯¹è±¡/é›†åˆè½¬æ¢æˆä¸€ä¸ªæ–°æ•°ç»„ã€‚

```js
function list() {
  return Array.prototype.slice.call(arguments);
}

var list1 = list(1, 2, 3); // [1, 2, 3]
```

åœ¨JavaScriptä¸­ï¼Œå‡ ä¹æ‰€æœ‰ä¸œè¥¿éƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œé™¤äº†stringï¼Œnumber å’Œ booleansè¿™æ ·ä¸å¯å˜çš„åŸå§‹å€¼ã€‚

Array.prototype.slice

```js
function myFunc() {
    // é”™è¯¯, argumentsæ˜¯ä¸€ä¸ªç±»æ•°ç»„å¯¹è±¡, ä¸æ˜¯ä¸€ä¸ªçœŸå®çš„æ•°ç»„
    arguments.sort();
    // å€Ÿç”¨ Array åŸå‹ä¸­çš„æ–¹æ³• slice
    // å®ƒæ¥å—ä¸€ä¸ªç±»æ•°ç»„å¯¹è±¡ (key:value)
    // å¹¶è¿”å›ä¸€ä¸ªçœŸå®çš„æ•°ç»„
    var args = Array.prototype.slice.call(arguments);
    // args ç°åœ¨æ˜¯ä¸€ä¸ªçœŸæ­£çš„æ•°ç»„, æ‰€ä»¥å¯ä»¥ä½¿ç”¨Arrayçš„sort()æ–¹æ³•
    args.sort();
}
```

æ•°ç»„æ’åºï¼Œreverse()é¢ å€’æ•°ç»„ä¸­å…ƒç´ çš„é¡ºåºï¼Œsort()å¯¹å­—ç¬¦æ•°ç»„æˆ–æ•°å­—æ•°ç»„è¿›è¡Œæ’åºã€‚

```js
function compare(value1, value2) {
    if(value1 < value2) {
        return -1;
    }else if(value1 > value2) {
        return 1;
    }else{
        return 0;
    }
}
```

> æ•°ç»„è½¬æ¢

- toString()è½¬æ¢ä¸ºå­—ç¬¦ä¸²å¹¶è¿”å›
- toLocaleString()è½¬æ¢ä¸ºæœ¬åœ°æ ¼å¼å­—ç¬¦ä¸²å¹¶è¿”å›
- join()ç”¨æŒ‡å®šåˆ†å‰²ç¬¦åˆ†å‰²æ•°ç»„å¹¶è½¬æ¢ä¸ºå­—ç¬¦ä¸²

toString()å‡½æ•°ç”¨äºå°†å½“å‰å¯¹è±¡å·²å­—ç¬¦ä¸²çš„å½¢å¼è¿”å›ã€‚è¯¥æ–¹æ³•å±äºObjectå¯¹è±¡ã€‚

è¿­ä»£æ–¹æ³•ï¼šå‚æ•°

- every å¦‚æœè¯¥å‡½æ•°å¯¹æ¯ä¸€é¡¹éƒ½è¿”å›trueï¼Œåˆ™è¿”å›true
- filter è¿”å›å€¼ä¸ºtrueçš„æ‰€æœ‰æ•°ç»„æˆå‘˜
- forEach **æ— è¿”å›å€¼**
- map è¿”å›æ¯æ¬¡å‡½æ•°è°ƒç”¨çš„ç»“æœæ•°ç»„
- some æœ‰ä»»æ„ä¸€é¡¹è¿”å›trueï¼Œåˆ™è¿”å›true

æ¥æ”¶å‚æ•°ï¼š

1. è¦åœ¨æ¯ä¸€é¡¹ä¸Šè¿è¡Œçš„å‡½æ•°
2. è¿è¡Œè¯¥å‡½æ•°çš„ä½œç”¨åŸŸå¯¹è±¡

ä¼ å…¥å‚æ•°ï¼š

1. æ•°ç»„é¡¹çš„å€¼item
2. è¯¥é¡¹åœ¨æ•°ç»„ä¸­çš„ä½ç½®index
3. æ•°ç»„å¯¹è±¡æœ¬èº«array

ç¼©å°æ–¹æ³•ï¼š

- reduce ä»æ•°ç»„èµ·å§‹ä½å¼€å§‹éå†
- reduceRight ä»æ•°ç»„æœ«å°¾å¼€å§‹éå†

reduce() æ–¹æ³•æ¥æ”¶ä¸€ä¸ªå‡½æ•°ä½œä¸ºç´¯åŠ å™¨ï¼Œæ•°ç»„ä¸­çš„æ¯ä¸ªå€¼ï¼ˆä»å·¦åˆ°å³ï¼‰å¼€å§‹ç¼©å‡ï¼Œæœ€ç»ˆè®¡ç®—ä¸ºä¸€ä¸ªå€¼ã€‚

reduce() å¯ä»¥ä½œä¸ºä¸€ä¸ªé«˜é˜¶å‡½æ•°ï¼Œç”¨äºå‡½æ•°çš„ composeã€‚

æ³¨æ„: reduce() **å¯¹äºç©ºæ•°ç»„æ˜¯ä¸ä¼šæ‰§è¡Œå›è°ƒå‡½æ•°çš„**ã€‚

```js
var numbers = [1, 2, 3, 4];
numbers.reduce(å›è°ƒå‡½æ•°);
```

```js
const array1 = [1, 2, 3, 4];
const reducer = (accumulator, currentValue) => accumulator + currentValue;

// 1 + 2 + 3 + 4
console.log(array1.reduce(reducer));
//  10

// 5 + 1 + 2 + 3 + 4
console.log(array1.reduce(reducer, 5));
//  15

var arr = [1,2,3,4];
// æ±‚å’Œ
var sum = arr.reduce((x,y)=>x+y)
var sum1 = arr.reduce((x,y)=>x*y)
```

æ±‚æ•°ç»„é¡¹çš„æœ€å¤§å€¼

```js
var max = arr.reduce(function (prev, cur) {
    return Math.max(prev,cur);
});
```
å–ä¸¤å€¼æœ€å¤§å€¼åç»§ç»­è¿›å…¥ä¸‹ä¸€è½®å›è°ƒã€‚

æ•°ç»„å»é‡

![](https://user-gold-cdn.xitu.io/2020/5/29/1725fa6bc46a0a47?w=402&h=207&f=png&s=14990)

```js
arr.reduce(function(prev,cur,index,arr){
...
}, init);

arr è¡¨ç¤ºåŸæ•°ç»„ï¼›
prev è¡¨ç¤ºä¸Šä¸€æ¬¡è°ƒç”¨å›è°ƒæ—¶çš„è¿”å›å€¼ï¼Œæˆ–è€…åˆå§‹å€¼ init;
cur è¡¨ç¤ºå½“å‰æ­£åœ¨å¤„ç†çš„æ•°ç»„å…ƒç´ ï¼›
index è¡¨ç¤ºå½“å‰æ­£åœ¨å¤„ç†çš„æ•°ç»„å…ƒç´ çš„ç´¢å¼•ï¼Œè‹¥æä¾› init å€¼ï¼Œåˆ™ç´¢å¼•ä¸º0ï¼Œå¦åˆ™ç´¢å¼•ä¸º1ï¼›
init è¡¨ç¤ºåˆå§‹å€¼ã€‚

arr.reduce(callback,[initialValue])
initialValue ï¼ˆä½œä¸ºç¬¬ä¸€æ¬¡è°ƒç”¨ callback çš„ç¬¬ä¸€ä¸ªå‚æ•°ã€‚ï¼‰
```

å¦‚æœè¿™ä¸ªæ•°ç»„ä¸ºç©ºï¼Œè¿ç”¨reduceæ˜¯ä»€ä¹ˆæƒ…å†µï¼Ÿ

```js
var  arr = [];
var sum = arr.reduce(function(prev, cur, index, arr) {
    console.log(prev, cur, index);
    return prev + cur;
})
//æŠ¥é”™ï¼Œ"TypeError: Reduce of empty array with no initial value"

var  arr = [];
var sum = arr.reduce(function(prev, cur, index, arr) {
    console.log(prev, cur, index);
    return prev + cur;
}ï¼Œ0)
console.log(arr, sum); // [] 0
```

js ä¸­inï¼Œä¸€èˆ¬ç”¨æ¥éå†å¯¹è±¡, ä¹Ÿå¯ä»¥ç”¨æ¥éå†æ•°ç»„

inä½œç”¨ï¼Œåˆ¤æ–­å±æ€§æ˜¯å¦å­˜åœ¨äºå¯¹è±¡ä¸­ï¼Œåœ¨trueï¼Œä¸åœ¨falseã€‚

inä½œç”¨ï¼Œåˆ¤æ–­æ•°ç»„ï¼Œç´¢å¼•å·å°±æ˜¯å±æ€§ã€‚

![](https://user-gold-cdn.xitu.io/2020/5/29/172605369c2a9855?w=274&h=259&f=png&s=10424)

å¯¹äºæ•°ç»„å¾ªç¯å‡ºæ¥çš„æ˜¯æ•°ç»„å…ƒç´ ï¼›å¯¹äºå¯¹è±¡å¾ªç¯å‡ºæ¥çš„æ˜¯å¯¹è±¡å±æ€§ï¼›å½“â€˜å¯¹è±¡â€™æ˜¯æ•°ç»„æ—¶ï¼šâ€œå˜é‡â€æŒ‡çš„æ˜¯æ•°ç»„çš„â€œç´¢å¼•â€ï¼›å½“â€˜å¯¹è±¡â€™ä¸ºå¯¹è±¡æ˜¯ï¼Œâ€œå˜é‡â€æŒ‡çš„æ˜¯å¯¹è±¡çš„â€œå±æ€§â€ã€‚

è®¡ç®—æ•°ç»„ä¸­æ¯ä¸ªå…ƒç´ å‡ºç°çš„æ¬¡æ•°

![](https://user-gold-cdn.xitu.io/2020/5/29/172607ae4e9cc32c?w=435&h=389&f=png&s=27862)

```
// æ±‚æ€»æˆç»©
var scoreReport = [
 {
   name: 'dada',
   score: 100
 },
 {
     name: 'é­”ç‹å“ªå’',
     score: 99
 }
]

// for
var sum = 0
for(var i = 0; i<scoreReport.length; i++) {
    sum += scoreReport[i].score
}
```

å¦‚æœä½¿ç”¨reduce

```
var sum = scoreReport.reduce(function(prev, cur) {
    return cur.score + prev
},0);
```
### Vuex

Vuexä¸­è§„åˆ™åªèƒ½åœ¨mutationsé‡Œä¿®æ”¹stateä¸­çš„æ•°æ®ï¼Œactionsä¸èƒ½ç›´æ¥ä¿®æ”¹state

åˆ›å»ºVuex.Storeå®ä¾‹ä¿å­˜åˆ°å˜é‡storeä¸­ï¼Œä½¿ç”¨export defaultå¯¼å‡ºstore

```js
import Vuex from 'vue'
import Vuex from 'vuex'
Vue.use(Vuex)
const store = new Vuex.Store({
    
})
export default store
```

> state

å¸¸å¸¸å†™çš„æ–‡ä»¶store.js

 
```
import Vue from 'vue'
import Vuex from 'vuex'
// import * as getters from './getters'
Vue.use(Vuex)
const state = {
    // æ”¾ç½®åˆå§‹çŠ¶æ€
    a: 123
};

const mutations = {
    // æ”¾ç½®æˆ‘ä»¬çš„çŠ¶æ€å˜æ›´å‡½æ•°
};

export default new Vuex.Store({
    state,
    mutations,
    // getters
})
```

`this.$store.state`æ¥è·å–å®šä¹‰çš„æ•°æ®

```js
import Vuex from 'vue'
import Vuex from 'vuex'
Vue.use(Vuex)
const store = new Vuex.Store({
    state: {
        count: 1
    }
})
export default store
```

```js
import Vuex from 'vue'
import Vuex from 'vuex'
Vue.use(Vuex)
const store = new Vuex.Store({
    state: {
        count: 1
    },
    getters: {
        // gettersç›¸å½“ä¸vueä¸­çš„computedè®¡ç®—å±æ€§
        getStateCount: function(state){
            return state.count+1;
        }
    }
})
export default store
```

è¦ä¿®æ”¹stateä¸­çš„å€¼ï¼Œéœ€è¦æäº¤mutationæ¥ä¿®æ”¹

Vuexä¸­çš„getterï¼Œå°±åƒè®¡ç®—å±æ€§ä¸€æ ·ï¼Œgetterçš„è¿”å›å€¼ä¼šæ ¹æ®å®ƒçš„ä¾èµ–è¢«ç¼“å­˜èµ·æ¥ï¼Œå¹¶ä¸”åªæœ‰å½“å®ƒçš„ä¾èµ–å€¼å‘ç”Ÿäº†æ”¹å˜æ‰ä¼šè¢«é‡æ–°è®¡ç®—ã€‚

Getter æ¥å— state ä½œä¸ºå…¶ç¬¬ä¸€ä¸ªå‚æ•°ï¼š

```js
const store = new Vuex.Store({
  state: {
    todos: [
      { id: 1, text: '...', done: true },
      { id: 2, text: '...', done: false }
    ]
  },
  getters: {
    doneTodos: state => {
      return state.todos.filter(todo => todo.done)
    }
  }
})
```

> getter åœ¨é€šè¿‡å±æ€§è®¿é—®æ—¶ï¼Œæ˜¯ä½œä¸º Vue çš„å“åº”å¼ç³»ç»Ÿçš„ä¸€éƒ¨åˆ†ç¼“å­˜å…¶ä¸­çš„
> getter åœ¨é€šè¿‡æ–¹æ³•è®¿é—®æ—¶ï¼Œæ¯æ¬¡éƒ½ä¼šå»è¿›è¡Œè°ƒç”¨ï¼Œè€Œä¸ä¼šç¼“å­˜ç»“æœã€‚

```js
æŸå‡½æ•°ä¸­{
    this.$store.commit('add');
}

import Vuex from 'vue'
import Vuex from 'vuex'
Vue.use(Vuex)
const store = new Vuex.Store({
    state: {
        count: 1
    },
    getters: {
        // gettersç›¸å½“ä¸vueä¸­çš„computedè®¡ç®—å±æ€§
        getStateCount: function(state){
            return state.count+1;
        }
    },
    mutations: {
        add(state) {
            state.count += 1;
        },
    }
})
export default store

// xxx.vue
{{$store.getters.getStateCount}}
```

æäº¤ mutation-å¯¹è±¡é£æ ¼çš„æäº¤æ–¹å¼ï¼Œç›´æ¥ä½¿ç”¨åŒ…å« type å±æ€§çš„å¯¹è±¡ï¼š

```js
store.commit({
  type: 'increment',
  amount: 10
})
```

Vuexä¸­è¿˜æœ‰ä¸€ä¸ªActionsï¼Œè¿™ä¸ªç›®çš„æ˜¯ä¸æƒ³ä¸Šé¢é‚£æ ·ç›´æ¥ä¿®æ”¹storeé‡Œé¢çš„å€¼ï¼Œè€Œæ˜¯é€šè¿‡å»æäº¤ä¸€ä¸ªactionsï¼Œç„¶åå†åœ¨actionsä¸­æäº¤mutationsä¸­å»ä¿®æ”¹çŠ¶æ€å€¼ã€‚

> å…ˆå®šä¹‰actionsæäº¤mutationsçš„å‡½æ•°

ç¤ºä¾‹ï¼š

```js
æŸå‡½æ•°ä¸­{
    this.$store.dispatch('addFun')
}

import Vuex from 'vue'
import Vuex from 'vuex'
Vue.use(Vuex)
const store = new Vuex.Store({
    state: {
        count: 1
    },
    getters: {
        // gettersç›¸å½“ä¸vueä¸­çš„computedè®¡ç®—å±æ€§
        getStateCount: function(state){
            return state.count+1;
        }
    },
    mutations: {
        add(state) {
            state.count += 1;
        },
    },
    actions: {
    // æ³¨å†Œactionsï¼Œç›¸å½“äºvueä¸­çš„methods
        addFun(context){
            // contextæ¥æ”¶ä¸€ä¸ªä¸storeå®ä¾‹å…·æœ‰ç›¸åŒæ–¹æ³•çš„å±æ€§çš„contextå¯¹è±¡
            context.commit('add')
        },
    }
})
export default store
```

> ä½¿ç”¨mapStateï¼ŒmapGettersï¼ŒmapActionsï¼Œä»£æ›¿`this.$store.state.countå’Œthis.$store.dispatch('addFun')`è¿™ç§å†™æ³•ã€‚

å¦‚ä½•ä½¿ç”¨ï¼š

```js
import {mapState, mapGetters, mapActions} from 'vuex';

// ä½¿ç”¨computed çŠ¶æ€å˜åŒ–

computed: {
    ...mapState({
        countdada: state=>state.count
    })
}

// å°† store ä¸­çš„ getter æ˜ å°„åˆ°å±€éƒ¨è®¡ç®—å±æ€§ï¼š
import { mapGetters } from 'vuex'

export default {
  // ...
  computed: {
  // ä½¿ç”¨å¯¹è±¡å±•å¼€è¿ç®—ç¬¦å°† getter æ··å…¥ computed å¯¹è±¡ä¸­
    ...mapGetters([
      'doneTodosCount',
      'anotherGetter',
      // ...
    ])
  }
}

...mapGetters({
  // æŠŠ `this.doneCount` æ˜ å°„ä¸º `this.$store.getters.doneTodosCount`
  doneCount: 'doneTodosCount'
})
```

### JavaScriptä¸­çš„this

thisï¼Œæ˜¯ä»€ä¹ˆï¼Œè¿™ä¸ªï¼Œthiså…³é”®å­—æ‰§è¡Œä¸ºå½“å‰æ‰§è¡Œç¯å¢ƒçš„ThisBindingã€‚

å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå‡½æ•°çš„è°ƒç”¨æ–¹å¼å†³å®šäº†thisçš„å€¼ã€‚thisæŒ‡å‘æ˜¯è°ƒç”¨æ—¶å†³å®šï¼Œè€Œä¸æ˜¯åˆ›å»ºæ—¶å†³å®šçš„ã€‚

```js
// thisæŒ‡å‘å…¨å±€å˜é‡
function dadaqianduan() {
    return this;
}

console.log(dadaqianduan() === window); // true
```

ä½¿ç”¨call()ï¼Œapply()ï¼ŒthisæŒ‡å‘ä¸ºç»‘å®šçš„å¯¹è±¡ä¸Šã€‚

```js
var person = {
    name: 'dada',
    age: 12
};
function sayHello(job) {
    console.log(this.name + "," + this.age + "," + job);
}

sayHello.call(person, 'it'); // dada,12,it
sayHello.apply(person, ['it']);
```

ç®­å¤´å‡½æ•°ï¼Œæ‰€æœ‰çš„ç®­å¤´å‡½æ•°éƒ½æ²¡æœ‰è‡ªå·±çš„thisï¼Œå¹¶æŒ‡å‘å¤–å±‚ã€‚ç®­å¤´å‡½æ•°ä¼šæ•è·å…¶æ‰€åœ¨ä¸Šä¸‹æ–‡çš„thiså€¼ï¼Œä½œä¸ºè‡ªå·±çš„thiså€¼ã€‚(å‡½æ•°å†…éƒ¨ï¼Œthisçš„å€¼å–å†³äºå‡½æ•°è¢«è°ƒç”¨çš„æ–¹å¼)

ç®­å¤´å‡½æ•°çš„thisï¼Œæ€»æ˜¯æŒ‡å‘å®šä¹‰æ—¶æ‰€åœ¨çš„å¯¹è±¡ã€‚ä¸æ˜¯è¿è¡Œæ—¶æ‰€åœ¨çš„å¯¹è±¡ã€‚

```js
function da() {
    setTimeout(()=>{
        console.log('this',this.id)
    },1000);
}

da.call({id: 12});
```

ç®­å¤´å‡½æ•°ä½äºdaå‡½æ•°å†…éƒ¨ï¼Œåªæœ‰daå‡½æ•°è¿è¡Œåï¼Œæ‰ä¼šæŒ‰ç…§å®šä¹‰ç”Ÿæˆï¼Œsoï¼Œdaè¿è¡Œæ—¶æ‰€åœ¨çš„å¯¹è±¡ï¼Œåˆšå¥½æ˜¯ç®­å¤´å‡½æ•°å®šä¹‰æ—¶æ‰€åœ¨çš„å¯¹è±¡ã€‚

ï¼ˆå€¼å¾—æ¢è®¨çš„ä¸€å¥è¯ï¼‰ï¼Œåœ¨ç®­å¤´å‡½æ•°é‡Œä½¿ç”¨thisï¼Œå°±åƒä½¿ç”¨æ™®é€šå˜é‡ä¸€æ ·ï¼Œåœ¨ç®­å¤´å‡½æ•°çš„scopeå†…æ‰¾ä¸éƒ½ä¼šä¸€ç›´å‘çˆ¶scopeå¯»æ‰¾ã€‚

thisåˆæŒ‡å‘å…¨å±€å˜é‡ï¼Œå¦‚ä¸‹ï¼š

æ„Ÿè°¢æ˜é‡‘ç½‘å‹ï¼š

![](https://user-gold-cdn.xitu.io/2020/6/11/172a38ce9a922ae1?w=618&h=143&f=png&s=15832)

```js
var name = 'da';
var person = {
    name: 'dadaqianduan',
    fun: function() {
        return this.name;
    }
}
var getName = person.getName();
console.log(getName()); // da

// æ”¹ä¸º
var name = 'da';
var person = {
    name: 'dadaqianduan',
    getName: function() {
        return this.name;
    }
}
var fun = person.getName;
console.log(fun()); // da
```

ä½œä¸ºä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œthisè¢«ç»‘å®šåˆ°æ­£åœ¨æ„é€ çš„æ–°å¯¹è±¡ã€‚

```
function Person(name) {
    this.name = name;
    this.age = 12;
    this.say = function() {
        console.log(this.name + ":" + this.age);
    }
}

var pserson = new Person('dadaqianduan');
person.say();
```

thisçš„å‡ ç§è°ƒç”¨åœºæ™¯ï¼š

```js
var obj = {
    a: 1,
    b: function() {
        console.log(this);
    }
}
```

- å½“ä½œä¸ºå¯¹è±¡è°ƒç”¨æ—¶ï¼ŒæŒ‡å‘è¯¥å¯¹è±¡obj.b(); // æŒ‡å‘obj
- å½“ä½œä¸ºå‡½æ•°è°ƒç”¨æ—¶ï¼Œvar b = obj.b; b(); // æŒ‡å‘å…¨å±€window
- å½“ä½œä¸ºæ„é€ å‡½æ•°è°ƒç”¨æ—¶ï¼Œvar b = new Fun(); // this.æŒ‡å‘å½“å‰å®ä¾‹å¯¹è±¡
- å½“ä½œä¸ºcallä¸applyè°ƒç”¨ obj.b.apply(object, []); // thisæŒ‡å‘å½“å‰çš„object

ç¤ºä¾‹ï¼š

```js
var a = dadaqianduan;
var obj = {
    a: dada
}

function fun() {
    console.log(this.a);
}

fun(); // dadaqianduan
fun.call(obj); // dada
```

```js
function da(a,b,c) {
    console.log(arguments);
    // ä½¿ç”¨call/applyå°†argumentsè½¬æ¢ä¸ºæ•°ç»„ï¼Œè¿”å›ç»“æœä¸ºæ•°ç»„
    var arg = [].slice.call(arguments);
}

da(1,2,3)
```

å…¨å±€ä¸Šä¸‹æ–‡ï¼Œéä¸¥æ ¼æ¨¡å¼å’Œä¸¥æ ¼æ¨¡å¼ä¸­thisæŒ‡å‘é¡¶å±‚å¯¹è±¡ã€‚

```js
this === window // true
```

å‡½æ•°ä¸Šä¸‹æ–‡

```js
var name = 'dadaqianduan';
var fun = function() {
    console.log(this.name);
}
fun(); // 'dadaqianduan'
```

call()æ–¹æ³•ä½¿ç”¨ä¸€ä¸ªæŒ‡å®šçš„thiså€¼å’Œå•ç‹¬ç»™å‡ºçš„ä¸€ä¸ªæˆ–å¤šä¸ªå‚æ•°æ¥è°ƒç”¨ä¸€ä¸ªå‡½æ•°ã€‚

> è¯¥æ–¹æ³•çš„è¯­æ³•å’Œä½œç”¨ä¸apply()æ–¹æ³•ç±»ä¼¼ï¼Œåªæœ‰ä¸€ä¸ªåŒºåˆ«ï¼Œå°±æ˜¯call()æ–¹æ³•æ¥å—çš„æ˜¯ä¸€ä¸ªå‚æ•°åˆ—è¡¨ï¼Œapply()æ–¹æ³•æ¥å—çš„æ˜¯ä¸€ä¸ªåŒ…å«å¤šä¸ªå‚æ•°çš„æ•°ç»„ã€‚

ç¤ºä¾‹ï¼š

```js
function da(name, age) {
    this.name = name;
    this.age = age;
}

function dada(name, age) {
    da.call(this, name, age);
    this.job = 'it';
}

console.log(new dada('dadaqianduan, 12').name);
// dadaqianduan
```

è¯­æ³•ï¼š

```js
function.call(thisArg, arg1, arg2, ...)
```

å‚æ•°:`thisArg`ï¼Œåœ¨functionå‡½æ•°è¿è¡Œæ—¶ä½¿ç”¨çš„thiså€¼ï¼Œthiså¯èƒ½ä¸æ˜¯è¯¥æ–¹æ³•çœ‹åˆ°çš„å®é™…å€¼ã€‚`arg1,arg2,...`æŒ‡å®šçš„å‚æ•°åˆ—è¡¨ã€‚

è¿”å›å€¼ï¼Œä½¿ç”¨è°ƒç”¨è€…æä¾›çš„thiså€¼å’Œå‚æ•°è°ƒç”¨è¯¥å‡½æ•°çš„è¿”å›å€¼ã€‚è‹¥è¯¥æ–¹æ³•æ²¡æœ‰è¿”å›å€¼ï¼Œåˆ™è¿”å›undefinedã€‚

æè¿°ï¼š

`call()`å…è®¸ä¸ºä¸åŒçš„å¯¹è±¡åˆ†é…å’Œè°ƒç”¨å±äºä¸€ä¸ªå¯¹è±¡çš„å‡½æ•°/æ–¹æ³•ã€‚æä¾›æ–°çš„thiså€¼ç»™å½“å‰è°ƒç”¨çš„å‡½æ•°/æ–¹æ³•ã€‚ä½ å¯ä»¥ä½¿ç”¨callæ¥å®ç°ç»§æ‰¿ã€‚

ä½¿ç”¨callæ–¹æ³•è°ƒç”¨çˆ¶æ„é€ å‡½æ•°

```js
function Person(name, age) {
    this.name = name;
    this.age = age;
} 

function Child1(name, age) {
    Person.call(this, name, age);
    this.eat = 'beff';
}

function Child2(name, age) {
    Person.call(this, name, age);
    this.eat = 'food';
}

var da1 = new Child1('é­”ç‹å“ªå’1', 12);
var da2 = new Child2('é­”ç‹å“ªå’2', 12);
```

ä½¿ç”¨callæ–¹æ³•è°ƒç”¨åŒ¿åå‡½æ•°

```js
var person = [
    {
        name: 'da1',
        age: 1
    },
    {
        name: 'da2',
        age: 2
    }
];

for(var i=0; i<person.length; i++) {
    (function(i){
        this.fun = function() {
            console.log('dadaqianduan');
        }
        this.fun();
    }).call(person[i], i);
}
```

```js
class Person{
    constructor(name) {
        this.name = name;
    }
    fun(){
        console.log(this.name);
    }
}
let da = new Person('è¾¾è¾¾å‰ç«¯');
da.fun(); // è¾¾è¾¾å‰ç«¯
```

å¯¹äºç®­å¤´å‡½æ•°è°ƒç”¨ï¼Œæ²¡æœ‰è‡ªå·±çš„this,super,arguments,new.targetç»‘å®šï¼Œä¸èƒ½ä½¿ç”¨newæ¥è°ƒç”¨ï¼Œæ²¡æœ‰åŸå‹å¯¹è±¡ï¼Œä¸å¯ä»¥æ”¹å˜thisçš„ç»‘å®šï¼Œå½¢å‚åç§°ä¸èƒ½é‡å¤ã€‚

thisçš„ç»‘å®šå¯¹è±¡ï¼Œé€šè¿‡newè°ƒç”¨ç»‘å®šåˆ°æ–°åˆ›å»ºçš„å¯¹è±¡ï¼Œreturnå‡½æ•°æˆ–å¯¹è±¡ï¼Œè¿”å›å€¼ä¸æ˜¯æ–°åˆ›å»ºçš„å¯¹è±¡ï¼Œè€Œæ˜¯æ˜¾å¼çš„è¿”å›å‡½æ•°æˆ–å¯¹è±¡ï¼›callæˆ–applyçš„è°ƒç”¨ï¼Œéä¸¥æ ¼æ¨¡å¼ï¼Œä¸ºnullå’Œundefinedï¼›å¯¹è±¡ä¸Šçš„å‡½æ•°è°ƒç”¨ï¼Œç»‘å®šåˆ°è¿™ä¸ªå¯¹è±¡ï¼›æ™®é€šå‡½æ•°çš„è°ƒç”¨ï¼Œä¸¥æ ¼æ¨¡å¼ï¼Œä¸ºundefinedã€‚

> æ³¨æ„ï¼šï¼ˆä¸€èµ·æ¥æ¢è®¨ï¼‰
> ä¹Ÿå¯ä»¥è¿™æ ·è®°ä½ï¼šå¯¹è±¡ä¸­æœ‰thisï¼Œå¯¹è±¡ä¸­çš„æ–¹æ³•ï¼ˆå‡½æ•°ï¼‰ï¼Œä»¥åŠæ™®é€šå‡½æ•°æ¥è®°ä½ã€‚

ç»‘å®šä¾‹å­ï¼Œthisåœ¨éä¸¥æ ¼æ¨¡å¼ä¸‹thisæŒ‡å‘å…¨å±€å¯¹è±¡ï¼Œä¸¥æ ¼æ¨¡å¼ä¸‹thisç»‘å®šåˆ°undefinedï¼Œéšå¼ç»‘å®šï¼Œobj.foo()çš„è°ƒç”¨æ–¹å¼ï¼Œfooå†…çš„thisæŒ‡å‘äº†objã€‚

æ˜¾ç¤ºç»‘å®šï¼Œcall()æˆ–apply()æ–¹æ³•ç›´æ¥æŒ‡å®šthisçš„ç»‘å®šå¯¹è±¡ï¼Œç®­å¤´å‡½æ•°ä¸­thisæŒ‡å‘ç”±å¤–å±‚ä½œç”¨åŸŸå†³å®šçš„ã€‚

ç¤ºä¾‹ï¼š

```js
var a = "dadaqianduan";
function foo () {
  console.log(this.a)
}
foo();

window.a = "dadaqianduan";
function foo() {
  console.log(this.a)
}
window.foo();

// dadaqianduan
```

ä¸¥æ ¼æ¨¡å¼ï¼Œåªæ˜¯ä½¿å¾—å‡½æ•°å†…çš„thisæŒ‡å‘undefinedï¼Œè€Œä¸ä¼šæ”¹å˜å…¨å±€ä¸­çš„thisæŒ‡å‘ã€‚åªæœ‰varä¼šæŠŠå˜é‡ç»‘å®šåˆ°windowä¸Šï¼Œè€Œletå’Œconstä¸ä¼šã€‚

```js
let a = "dada"
const b = "dada1"

function foo () {
  console.log(this.a)
  console.log(this.b)
}
foo();
console.log(window.a)

// undefined
// undefined
// undefined
```

```js
var a = "da";
function fun() {
    var a = "da1";
    console.log(this); // window
    console.log(this.a); // so, window.a -> da
}
fun(); // windowè°ƒç”¨çš„fun
```

```js
var a = "da";
function fun() {
   // thisæŒ‡å‘window
    var a = "da1";
    function inner() {
        console.log(this.a);
    }
    inner();
}
fun(); // da
```

> è°æœ€åè°ƒç”¨å‡½æ•°ï¼Œå‡½æ•°å†…çš„thisæŒ‡å‘æœ€è¿‘åŸåˆ™

ç¤ºä¾‹ï¼š

```js
function fun() {
    console.log(this.a)
}
var obj = {
    a: 'da',
    fun
}
var a = 'da1';
obj.fun(); // da

// var obj = {fun} => var obj = {fun: fun}

objå¯¹è±¡å¼•ç”¨fun() èµ‹å€¼ obj.funä¸Šï¼Œè°ƒç”¨çš„æ˜¯objå¯¹è±¡ï¼Œæ‰“å°çš„å°±æ˜¯objä¸­çš„a

var obj = {
    a: 'da',
    fun: function() {
    // thisæŒ‡å‘obj
        console.log(this.a)
    }
}

var a = 'da1'
obj.fun()
```

```js
function fun() {
    console.log(this.a);
};

var obj = {
    a: 'da',
    fun
};

var a = 'da1';

var fun1 = obj.fun;

obj.fun(); // thisæŒ‡å‘obj -> da

fun1(); // æŒ‡å‘obj.fun(); ï¼Œä½†è°ƒç”¨çš„æ˜¯windowå¯¹è±¡ï¼Œsoï¼Œthisçš„æŒ‡å‘ä¸ºwindow
// window.fun1()
```

```js
function fun() {
  console.log(this.a);  
};

var obj = {
    a: 'da',
    fun
};

var a = 'da1';

var fun1 = obj.fun;

var ojb1 = {
    a: 'da2',
    fun2: obj.fun
};

obj.fun(); // thisæŒ‡å‘obj -> da

fun1(); // obj.fun() -> è°ƒç”¨è€…ä¸ºwindowï¼Œsoï¼ŒthisæŒ‡å‘windowï¼Œ-> da1
obj1.fun2(); // è°ƒç”¨è€…ä¸ºobj1ï¼Œsoï¼ŒthisæŒ‡å‘obj1
```

```js
function fun() {
    console.log(this.a);
};

function doFun(fn) {
    console.log(this);
    fn();
};

var obj = {
    a: 'da',
    fun
};

var a = 'da1';

doFun(obj.fun); // obj.fun(); soï¼Œé‡Œé¢çš„thisæŒ‡å‘window -> da1
```

```js
function fun() {
    console.log(this.a);
};

function doFun(fn) {
    console.log(this);
    fn();
};

var obj = {
    a: 'da',
    fun
}

var a = 'da1';

var obj1 = {
    a: 'da2',
    doFun
};

obj1.doFun(obj.fun) // obj1å¯¹è±¡è°ƒç”¨doFun()ï¼Œä¼ å‚æ•°obj.funï¼ŒthisæŒ‡å‘obj1.
// obj.fun() æ‰“å° da1 

åŸå› ï¼šæŠŠä¸€ä¸ªå‡½æ•°å½“åšå‚æ•°ä¼ é€’ç»™å¦ä¸€ä¸ªå‡½æ•°ï¼Œä¼šå‘ç”Ÿéšå¼ä¸¢å¤±ï¼Œå°±æ˜¯å›è°ƒå‡½æ•°ä¸¢å¤±thisç»‘å®šã€‚

// ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œä¼šç»‘å®šåˆ°undefined
```

### call,apply,bind

ä½¿ç”¨callå’Œapplyçš„å‡½æ•°ä¼šç›´æ¥æ‰§è¡Œï¼Œbindæ˜¯åˆ›å»ºä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œéœ€è¦æ‰‹åŠ¨è°ƒç”¨æ‰è¡Œã€‚

ç¤ºä¾‹ï¼š

```js
function fun() {
    console.log(this.a);
};

var obj = {
    a: 'da'
};

var a = 'da1';

fun(); // da1
fun.call(obj); // da
fun.apply(obj); // da
fun.bind(obj); // ä½¿ç”¨bindåˆ›å»ºä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œä¸ä¼šæ‰§è¡Œ
```

ç¤ºä¾‹ï¼š

```js
å¦‚æœcall,apply,bindæ¥æ”¶ å‚æ•° ä¸ºç©ºæˆ–è€…nullï¼Œundefinedï¼Œä¼šå¿½ç•¥è¿™ä¸ªå‚æ•°

function fun() {
    console.log(this.a);
};

var a = 'da';

fun.call(); // da
fun.call(null); // da
fun.call(undefined); // da
```

```js
var ojb1 = {
    a: 'da'
};

var obj2 = {
    a: 'da1',
    fun1: function() {
        console.log(this.a); // da1
    },
    fun2: function() {
        setTimeout(function(){
           console.log(this); // window
           console.log(this.a); // window.a -> da2
        },0)
    }
}

var a = 'da2';

obj2.fun1(); // da1
obj2.fun2(); // 
```

```js
var obj1 = {
    a: 'da'
};

var obj2 = {
    a: 'da1',
    fun1: function() {
        console.log(this.a); // da1
    },
    fun2: function() {
        setTimeout(function() {
            console.log(this); // soï¼Œ{a:'da'}
            console.log(this.a); // soï¼Œda
        }.call(obj1), 0) // ç»‘å®šå¤–ç•Œå¯¹è±¡obj1
    }
}
var a = 'da2';

obj2.fun1();
obj2.fun2();

// ä½¿ç”¨ obj2.fun2.call(obj1) å³æ”¹å˜fun2å‡½æ•°ä¸­çš„thisæŒ‡å‘
```

```js
var obj1 = {
    a: 'da'
};

var obj2 = {
    a: 'da1',
    fun1: function() {
        console.log(this.a); // da1
    },
    fun2: function() {
        function inner() {
            console.log(this); // window{...}
            console.log(this.a); // da2
        }
        inner();
    }
}
var a = 'da2';
obj2.fun1();
obj2.fun2();
```

```js
function fun() {
    console.log(this.a);
};

var obj = {
    a: 'da'
};

var a = 'da1';

fun(); // da1
fun.call(obj); // da
fun().call(obj);  // æ‰§è¡Œfun() -> da1ï¼Œfun()å‡½æ•°è¿”å›å€¼æ‰§è¡Œ.call(obj)ä¼šæŠ¥é”™
// fun()å‡½æ•°çš„è¿”å›å€¼undefined -> å‡½æ•°çš„è¿”å›å€¼.call()
```

```js
function fun() {
    console.log(this.a);
    return function() {
        console.log(this.a);
    }
};

var obj = {
    a: 'da'
};

var a = 'da1';

fun(); // da1 -> è¿”å›ä¸€ä¸ªåŒ¿åå‡½æ•°ï¼Œæ²¡æœ‰è°ƒç”¨ï¼Œå¯ä»¥ä½¿ç”¨fun()(); è°ƒç”¨åŒ¿åå‡½æ•°
fun.call(obj); // da -> è¿”å›åŒ¿åå‡½æ•°ï¼Œæ²¡æœ‰è°ƒç”¨
fun().call(obj); // fun(),ç»“æœå€¼ da1ï¼Œè¿”å›ä¸€ä¸ªåŒ¿åå‡½æ•°,å¹¶ç»‘å®šobj,åˆ™thisç»‘å®šåˆ°äº†objï¼Œthis.a ä¸ºobj.a -> ç»“æœå€¼ä¸ºda

// fun().call(obj); -> da1,da
```

> bindç»‘å®šï¼Œåªæ˜¯è¿”å›ä¸€ä¸ªæ–°çš„å‡½æ•°

ç¤ºä¾‹ï¼š

```js
function fun() {
    console.log(this.a);
    return function() {
        console.log(this.a);
    }
}

var obj = {
    a: 'da'
};

var a = 'da1';

fun(); // da1
fun.bind(obj); // ä¸ä¼šæ‰§è¡Œï¼Œè¿”å›ä¸€ä¸ªæ–°å‡½æ•°
fun().bind(obj); // da1 -> åŒ¿åå‡½æ•°ç»‘å®šobjï¼Œæ²¡æœ‰è°ƒç”¨ã€‚
```

```js
function fun() {
    console.log(this.a);
    return function()  {
        console.log(this.a);
    }
}
var obj = {
    a: 'da'
};
var a = 'da1';
fun.call(obj)(); // da , da1

// funç»‘å®šäº†obj,thisæŒ‡å‘äº†objï¼ŒåŒ¿åå‡½æ•°è°ƒç”¨
```

```js
var obj = {
    a: 'da',
    fun: function() {
        console.log(this.a);
        return function() {
            console.log(this.a)
        }
    }
};

var a = 'da1';

var obj1 = {
    a: 'da2'
};

obj.fun()(); // å‡½æ•°ä¸­çš„this.a , åŒ¿åå‡½æ•°ä¸­çš„this.a->window
obj.fun.call(obj1)(); // ç»‘å®šobj1ï¼ŒåŒ¿åå‡½æ•°è¿”å›->window
obj.fun().call(obj1); // da1 ,ç»‘å®šobj1ï¼Œso, thisæŒ‡å‘obj2
```

![](https://user-gold-cdn.xitu.io/2020/6/9/172952cf5ad0259b?w=305&h=626&f=png&s=18096)

```js
var da1 = {
    name: 'é­”ç‹å“ªå’',
    sayHello: function(age) {
        console.log(this.name + age);
    }
};

var da2 = {
    name: 'è¾¾è¾¾å‰ç«¯',
};

da1.sayHello(12);

// apply,call
da1.sayHello.apply(da2, [12]); // è¾¾è¾¾å‰ç«¯12
da1.sayHello.call(da2, 12); // è¾¾è¾¾å‰ç«¯12
```

```js
æ¨¡æ‹Ÿ

Function.prototype.applyFun = function(context) {
    context.fn = this;
    context.fn();
    // ä»ä¸Šä¸‹æ–‡ä¸­åˆ é™¤å‡½æ•°å¼•ç”¨
    delete context.fn;
}

// å‚æ•°
Function.prototype.applyFun = function(context) {
    context.fn = this;
    var args = arguments[1];
    context.fn(args.join(',')); // join -> string
    // æ‰§è¡Œè¿™ä¸ªå‡½æ•°ï¼Œç”¨ES6çš„...è¿ç®—ç¬¦å°†argå±•å¼€
    // context.fn(...args);
    delete context.fn;
}
```

```js
var a = 'da';

function sayHello() {
    console.log(this.name);
}

sayHello.apply(null); // ä¼ nullæˆ–è€…ä¸ä¼ å‚æ•°ï¼Œè§†ä¸ºæŒ‡å‘window

var a = 'da';

function sayHello() {
    console.log(this.name);
}

sayHello.apply(); // ä¼ nullæˆ–è€…ä¸ä¼ å‚æ•°ï¼Œè§†ä¸ºæŒ‡å‘window
```

é‡å†™å±æ€§ï¼ŒES5ï¼š

```js
var a = {
    name: 'da'
};

a.name = 'da1'
```

> es6å¼•å…¥ä¸€ç§åŸå§‹æ•°æ®ç±»å‹Symbolï¼Œè¡¨ç¤ºç‹¬ä¸€æ— äºŒçš„å€¼,Symbolå‡½æ•°å¯ä»¥æ¥æ”¶ä¸€ä¸ªå­—ç¬¦ä¸²ä½œä¸ºå‚æ•°ã€‚Symbolå‡½æ•°ä¸èƒ½ä½¿ç”¨newå‘½ä»¤ï¼Œç”ŸæˆSymbolæ˜¯ä¸€ä¸ªåŸå§‹ç±»å‹çš„å€¼ï¼Œä¸æ˜¯å¯¹è±¡ã€‚

ç¤ºä¾‹ï¼š

```js
var s1 = Symbol();
var s2 = Symbol();

s1 === s2 // false

var s1 = Symbol("foo");
var s2 = Symbol("foo");

s1 === s2 // false
```

> Symbolå€¼ä½œä¸ºå¯¹è±¡å±æ€§åæ—¶ï¼Œä¸ç”¨ç‚¹è¿ç®—ç¬¦ã€‚

ç¤ºä¾‹ï¼š

```js
var mySymbol = Symbol();

// ç¬¬ä¸€ç§å†™æ³•
var a = {};
a[mySymbol] = 'é­”ç‹å“ªå’';

// ç¬¬äºŒç§å†™æ³•
var a = {
  [mySymbol]: 'é­”ç‹å“ªå’'
};

// ç¬¬ä¸‰ç§å†™æ³•
var a = {};
Object.defineProperty(a, mySymbol, { value: 'é­”ç‹å“ªå’' });

// ä»¥ä¸Šå†™æ³•éƒ½å¾—åˆ°åŒæ ·ç»“æœ
a[mySymbol] // "é­”ç‹å“ªå’"
```

```js
var a = {};
var name = Symbol();
a.name = 'da1';
a[name] = 'da2';
console.log(a.name,a[name]);             //da1,da2
```

```js
var obj = {
    a: 'da',
    fun: function(b) {
        b = b || this.a
        return function (c) {
            console.log(this.a + b + c)
        }
    }
}

var a = 'da1';

var obj1 = {
    a: 'da2'
}

obj.fun(a).call(obj1, 1)
// obj.fun(da1) -> da1ä¼ ç»™å‚æ•°b, callæ”¹å˜äº†thisï¼Œç»‘å®šå¯¹è±¡ojb1ï¼Œsoï¼Œthisçš„æŒ‡å‘æ”¹å˜ï¼Œthis.aæŒ‡å‘å¯¹è±¡obj1ï¼Œä¸ºda2ã€‚
// æœ€åç»“æœ,da2 da1 1

obj.fun.call(obj1)(1)
// objä¸­funå‡½æ•°å†…çš„thisç»‘å®šå¯¹è±¡Obj1ï¼ŒthisæŒ‡å‘äº†obj1
// obj.fun.call(obj1)æ²¡æœ‰ä¼ é€’å‚æ•°ï¼Œ soï¼Œ å› b = b || this.a
// soï¼Œbä¸º(è®°ä½ç»‘å®šäº†obj1)da2ã€‚æœ€åè°ƒç”¨åŒ¿åå‡½æ•°ï¼ŒåŒ¿åå‡½æ•°å†…çš„thisæŒ‡å‘window
// da1(this.aä¸ºæŒ‡å‘window),da2,1
```

![](https://user-gold-cdn.xitu.io/2020/6/9/172977516ef828f3?w=352&h=456&f=png&s=21508)

```js

function fun1 () {
    console.log(this.a);
};

var a = 'da';

var obj = {
    a: 'da1'
}

var fun2 = function() {
    fun1.call(obj);
};

fun2(); // da1
fun2.call(window); // da1
```

```js
function fun1(b) {
    console.log(`${this.a} + ${b}`)
    return this.a + b
}
var a = 1
var obj = {
  a: 3
}

var fun2 = function () {
  return fun1.call(obj, ...arguments)
}

var dada = fun2(5)
console.log(dada)

'3 + 5'
8

// fun2(5)-> fun1ç»‘å®šå¯¹è±¡objï¼Œsoï¼Œthis.aä¸ºobjä¸­çš„aä¸º3ï¼Œ5å¸¦å…¥å³å¯
```

```js
function fun(item) {
    console.log(item, this.a);
};
var obj = {
    a: 'é­”ç‹å“ªå’'
};
var a = 'dada'

var arr = [1,2,3];
// forEach, map, filterçš„ç¬¬äºŒä¸ªå‚æ•°å¯ä»¥ç»‘å®šthisçš„

arr.filter(function(i){
    console.log(i, this.a);
    return i>2
},obj)

1 'é­”ç‹å“ªå’'
2 'é­”ç‹å“ªå’'
3 'é­”ç‹å“ªå’'
```

```js
function da (name) {
    this.name = name
};

var name = 'da1';

var dada = new da('da2');
console.log(dada.name) // da2

// new è°ƒç”¨daå‡½æ•°ï¼Œæ„é€ äº†ä¸€ä¸ªæ–°å¯¹è±¡dadaï¼Œdadaå¯¹è±¡ç»‘å®šåˆ°daè°ƒç”¨ä¸­çš„this
```

```js
var name = 'é­”ç‹å“ªå’';
function fun (name) { // æ„é€ å‡½æ•°
    this.name = name;
    this.daFun = function () {
        console.log(this.name);
        return function () {
            console.log(this.name);
        }
    }
}

var da1 = new fun('é­”ç‹å“ªå’1');
var da2 = new fun('é­”ç‹å“ªå’2');

da1.daFun.call(da2)()
da1.daFun().call(da2)
```

æ”¹å˜æ€è·¯ï¼Œæ”¹å˜æƒ³æ³•ï¼š

```js
var name = 'é­”ç‹å“ªå’';

// var da1 = new fun('é­”ç‹å“ªå’1');
var da1 = {
    name: 'é­”ç‹å“ªå’1',
    daFun: function() {
        console.log(this.name);
        return function () {
            console.log(this.name);
        }
    }
}

// var da2 = new fun('é­”ç‹å“ªå’2');

var da2 = {
    name: 'é­”ç‹å“ªå’2',
    daFun: function() {
        console.log(this.name);
        return function () {
            console.log(this.name);
        }
    }
}

da1.daFun.call(da2)() // daFunå‡½æ•°ç»‘å®šäº†da2ï¼ŒæŒ‡å‘äº†da2ï¼Œsoï¼ŒthisæŒ‡å‘äº†da2ï¼Œè¾“å‡º é­”ç‹å“ªå’2ï¼Œæœ€åè°ƒç”¨()ï¼Œå†…éƒ¨è¿”å›çš„åŒ¿åå‡½æ•°ç”±windowè°ƒç”¨ï¼Œæ‰“å°å‡º é­”ç‹å“ªå’
// é­”ç‹å“ªå’2 ï¼Œé­”ç‹å“ªå’

da1.daFun().call(da2)

// da1.daFun().call(da2) å°†åŒ¿åå‡½æ•°çš„thisç»‘å®šåˆ°äº†da2ä¸Š

// da1.daFun() -> é­”ç‹å“ªå’1 -> é­”ç‹å“ªå’2
```

### ç®­å¤´å‡½æ•°

> ç®­å¤´å‡½æ•°é‡Œçš„thisï¼Œç”±å¤–å±‚ä½œç”¨åŸŸå†³å®šï¼ŒæŒ‡å‘å‡½æ•°å®šä¹‰æ—¶çš„thisï¼Œéæ‰§è¡Œæ—¶ã€‚ï¼ˆæ¢è®¨ï¼‰

```js
var obj = {
    name: 'é­”ç‹å“ªå’',
    fun1: () => {
        // thisæŒ‡å‘ç”±å¤–å±‚ä½œç”¨åŸŸå†³å®šï¼ŒæŒ‡å‘å‡½æ•°å®šä¹‰æ—¶çš„thisï¼Œä¸ºwindow
        console.log(this.name)
    },
    fun2: function() {
        console.log(this.name)
        return () => {
            console.log(this.name);
        }
    }
}

var name = 'è¾¾è¾¾å‰ç«¯';

obj.fun1(); // this.name -> è¾¾è¾¾å‰ç«¯ ï¼Œè°ƒç”¨æ—¶å¤–å±‚ï¼Œåˆ™å¤–å±‚ä½œç”¨åŸŸæ—¶window

obj.fun2()(); // this.name , this.name(åŒ¿åå‡½æ•°)

// å…ˆçœ‹obj.fun2() ï¼Œç„¶åäº†è§£obj.fun2()()
// è¿™é‡Œçš„ç¬¬ä¸€ä¸ªæŒ‡å‘è°ƒç”¨å®ƒçš„å¯¹è±¡ obj ï¼Œ soï¼Œæ˜¯ é­”ç‹å“ªå’ï¼Œé‡Œé¢çš„åŒ¿åå‡½æ•°æ˜¯ç®­å¤´å‡½æ•°ï¼Œç®­å¤´å‡½æ•°æŒ‡å‘å®šä¹‰æ—¶ï¼Œå°±æ˜¯thisçš„å¤–å±‚ä½œç”¨åŸŸå†³å®šï¼Œå¯è§æ˜¯fun2è¿™ä¸ªå‡½æ•°ï¼Œsoï¼Œé‚£ä¹ˆåŒ¿åå‡½æ•°é‡Œçš„thisä¼šå’Œfun2å‡½æ•°é‡Œçš„thisä¸€æ ·ã€‚ä¹Ÿæ˜¯ é­”ç‹å“ªå’ã€‚
```

![](https://user-gold-cdn.xitu.io/2020/6/10/1729e816269221b0?w=501&h=363&f=png&s=20778)

```js
var name = 'è¾¾è¾¾å‰ç«¯';

var obj1 = {
    name: 'é­”ç‹å“ªå’1',
    fun: function() {
        console.log(this.name)
    }
}

var obj2 = {
    name: 'é­”ç‹å“ªå’2',
    fun: () => {
        console.log(this.name)
    }
}

obj1.fun() // ç”±obj1è°ƒï¼Œsoï¼Œé­”ç‹å“ªå’1
obj2.fun() // thiså®šä¹‰æ—¶æŒ‡å‘äº†windowï¼Œsoï¼Œè¾¾è¾¾å‰ç«¯
```

```js
var name = 'è¾¾è¾¾å‰ç«¯';
var obj1 = {
    name: 'é­”ç‹å“ªå’1',
    fun: function () {
        console.log(this.name);
        return function() {
            console.log(this.name);
        }
    }
}

obj1.fun()(); 
// obj1.fun() -> é­”ç‹å“ªå’ï¼Œè°ƒç”¨åŒ¿åå‡½æ•°ï¼ˆï¼‰,ç¬¬äºŒä¸ªthis.nameè°ƒç”¨å¤–å±‚ï¼Œsoï¼Œä¸ºè¾¾è¾¾å‰ç«¯

// é­”ç‹å“ªå’ï¼Œè¾¾è¾¾å‰ç«¯

var obj2 = {
    name: 'é­”ç‹å“ªå’2',
    fun: function() {
        console.log(this.name);
        return () => {
            console.log(this.name);
        }
    }
}

obj2.fun()(); // obj2.fun() ç¬¬ä¸€ä¸ªå€¼ä¸º é­”ç‹å“ªå’2ï¼Œ ç¬¬äºŒä¸ªç®­å¤´å‡½æ•°ï¼Œthiså®šä¹‰æ—¶æŒ‡å‘å¤–å±‚ï¼Œå³ä¸ºobj2ä¸­çš„thisï¼Œsoï¼Œä¸º é­”ç‹å“ªå’2

// é­”ç‹å“ªå’2ï¼Œé­”ç‹å“ªå’2

var obj3 = {
    name: 'é­”ç‹å“ªå’3',
    fun: () => {
        console.log(this.name);
        return function() {
            console.log(this.name)
        }
    }
}

obj3.fun()(); // è¾¾è¾¾å‰ç«¯ï¼Œè¾¾è¾¾å‰ç«¯

// ç¬¬ä¸€ä¸ªthis.name ï¼Œç®­å¤´å‡½æ•°ç”±å¤–å±‚ä½œç”¨åŸŸå†³å®šï¼Œå®šä¹‰æ—¶æŒ‡å‘windowï¼Œå†…å­˜å‡½æ•°ï¼Œç”±è°ƒç”¨è€…å†³å®šï¼Œsoï¼Œä¹Ÿæ˜¯ è¾¾è¾¾å‰ç«¯ã€‚

var obj4 = {
    name: 'é­”ç‹å“ªå’4',
    fun: () => {
        console.log(this.name);
        return () => {
            console.log(this.name);
        }
    }
}

obj4.fun()(); // è¾¾è¾¾å‰ç«¯ï¼Œè¾¾è¾¾å‰ç«¯ï¼Œå®šä¹‰æ—¶ï¼Œä¸æ˜¯è°ƒç”¨æ—¶
```

```js
var name = 'è¾¾è¾¾å‰ç«¯';

function dada (name) {
    this.name = name;
    this.fun1 = function() {
        console.log(this.name);
    }
    this.fun2 = () => {
        // æŒ‡å‘å¤–å±‚ä½œç”¨åŸŸå‡½æ•°dada
        console.log(this.name);
    }
}

var da2 = {
    name: 'da2',
    fun2: () => {
        console.log(this.name);
    }
}

var da1 = new dada('é­”ç‹å“ªå’');
da1.fun1(); // é­”ç‹å“ªå’ï¼Œæ™®é€šå‡½æ•°ï¼Œè°ƒç”¨è€…æ˜¯dadaï¼Œï¼ˆç”±æœ€åè°ƒç”¨è€…å¯¹è±¡å†³å®šï¼‰
da1.fun2(); // é­”ç‹å“ªå’ï¼Œç®­å¤´å‡½æ•°ï¼Œç”±å¤–å±‚ä½œç”¨åŸŸå†³å®šï¼Œå‡½æ•°å®šä¹‰æ—¶
// å¤–å±‚ä½œç”¨åŸŸæ˜¯å‡½æ•°dadaï¼Œæ„é€ å‡½æ•°ï¼Œnew æ¥ç”Ÿæˆå¯¹è±¡da1ï¼ŒæŒ‡å‘äº†dada

da2.fun2(); // è¾¾è¾¾å‰ç«¯, da2çš„ä½œç”¨åŸŸåœ¨windowä¸‹ï¼Œsoï¼Œå»ºå‘•åå‡½æ•°å†…thisæŒ‡å‘window
```

```js
var name = 'è¾¾è¾¾å‰ç«¯',
function dada(name) {
    this.name = name;
    this.fun1 = function() { // æ™®é€šå‡½æ•°
        console.log(this.name);  // è¾¾è¾¾
        return function() { // åŒ¿åå‡½æ•°
            console.log(this.name); // è¾¾è¾¾å‰ç«¯
        }
    }
    this.fun2 = function() { // æ™®é€šå‡½æ•°
        console.log(this.name); // è¾¾è¾¾
        return () => { // ç®­å¤´å‡½æ•°
            console.log(this.name); // ç”±å¤–å±‚å†³å®šï¼Œå¤–å±‚å°±æ˜¯è¿™ä¸ªdadaå‡½æ•°ï¼Œå€¼ä¸º è¾¾è¾¾
        }
    }
    this.fun3 = () => { // ç®­å¤´å‡½æ•°
        console.log(this.name); // å¤–å±‚å†³å®šï¼Œæ˜¯dadaï¼Œsoï¼Œè¾¾è¾¾
        return function() { // æ™®é€šå‡½æ•°
            console.log(this.name) // ç”±è°ƒç”¨è€…å†³å®šï¼Œda1.foo3()è¿”å›ä¸€ä¸ªæ™®é€šå‡½æ•°ï¼Œè°ƒç”¨è€…å¤–å±‚å­—é¢é‡da1ï¼Œåœ¨windowä¸­ï¼Œsoï¼Œè¾¾è¾¾å‰ç«¯
        }
    }
    this.fun4 = () => { // ç®­å¤´å‡½æ•°
        console.log(this.name); // å®šä¹‰æ—¶ï¼ŒthisæŒ‡å‘å¤–å±‚ï¼Œè¾¾è¾¾
        return () => { // ç®­å¤´å‡½æ•°
            console.log(this.name); // æŒ‡å‘å¤–å±‚,è¾¾è¾¾
        }
    }
}

var da1 = new dada('è¾¾è¾¾');

da1.fun1()(); // è¾¾è¾¾ è¾¾è¾¾å‰ç«¯
da1.fun2()(); // è¾¾è¾¾ è¾¾è¾¾
da1.fun3()(); // è¾¾è¾¾ è¾¾è¾¾å‰ç«¯
da1.fun4()(); // è¾¾è¾¾ è¾¾è¾¾
```

> ç®­å¤´å‡½æ•°ä¸­çš„thisï¼Œæ— æ³•ç”¨bindï¼Œcallï¼Œapplyå‡½æ•°æ¥ç›´æ¥ä¿®æ”¹ï¼Œå¯ä»¥é€šè¿‡æ”¹å˜ä½œç”¨åŸŸä¸­thisçš„æŒ‡å‘æ¥ä¿®æ”¹ã€‚

ç¤ºä¾‹ï¼š

```js
var name = 'è¾¾è¾¾å‰ç«¯';

var obj1 = {
    name: 'è¾¾è¾¾1',
    fun1: function() { // æ™®é€šå‡½æ•°
        console.log(this.name);
        return () => { // ç®­å¤´å‡½æ•°
            console.log(this.name);
        }
    },
    fun2: () => { 
        // ç®­å¤´å‡½æ•°
        console.log(this.name);
        return function() {
            // æ™®é€šå‡½æ•°
            console.log(this.name);
        }
    }
}

var obj2 = {
    name: 'è¾¾è¾¾2'
};

obj1.fun1.call(obj2)() // .callç»‘å®šäº†å¯¹è±¡obj2ï¼Œç¬¬ä¸€ä¸ª()è¿è¡Œï¼Œè¾¾è¾¾2ï¼Œç¬¬äºŒä¸ª()ï¼Œç®­å¤´å‡½æ•°ï¼Œç”±å¤–å±‚çš„fun1æ™®é€šå‡½æ•°ä¸­çš„thisç›¸åŒï¼Œsoï¼Œè¾¾è¾¾2

// è¾¾è¾¾2 è¾¾è¾¾2

obj1.fun1().call(obj2) // ç¬¬ä¸€ä¸ªè°ƒç”¨obj1ä¸­ï¼Œè¾¾è¾¾1ï¼Œè¿”å›ç®­å¤´å‡½æ•°ï¼Œ.callç»‘å®šå¯¹è±¡obj2ï¼Œæƒ³æ”¹å˜thisçš„æŒ‡å‘obj2ï¼Œä½†æ˜¯æ— æ•ˆï¼Œå› ä¸ºæ˜¯å®šä¹‰æ—¶å°±å†³å®šäº†çš„ï¼Œthisçš„æ‰§è¡Œè¿˜æ˜¯obj1ï¼Œsoï¼Œè¾“å‡º è¾¾è¾¾1

// è¾¾è¾¾1 è¾¾è¾¾1

obj1.fun2.call(obj2)() // obj1å­—é¢é‡ï¼Œ.callç»‘å®šobj2æ— æ•ˆï¼Œç¬¬ä¸€ä¸ªæ˜¯ç®­å¤´å‡½æ•°ï¼Œå¤–å±‚ä½œç”¨åŸŸwindowï¼Œè¾¾è¾¾å‰ç«¯ï¼Œè¾¾è¾¾å‰ç«¯ï¼Œobj1.fun2.call(obj2) æŒ‡å‘å¤–å±‚window

// è¾¾è¾¾å‰ç«¯ è¾¾è¾¾å‰ç«¯

obj1.fun2().call(obj2) // ç¬¬ä¸€å±‚ï¼Œç®­å¤´å‡½æ•°ï¼Œç¬¬äºŒå±‚ï¼Œæ™®é€šå‡½æ•°ï¼Œç¬¬ä¸€å±‚ç›´æ¥æ˜¯å¤–å±‚ä½œç”¨åŸŸwindowï¼Œè¾¾è¾¾å‰ç«¯

// ç¬¬äºŒå±‚ç»‘å®šä¸€ä¸ªäº†obj2ï¼Œso, è¾¾è¾¾2

// è¾¾è¾¾å‰ç«¯ï¼Œ è¾¾è¾¾2
```

> æ³¨æ„ï¼šå­—é¢é‡åˆ›å»ºçš„å¯¹è±¡ï¼Œä½œç”¨åŸŸæ˜¯windowï¼Œå¦‚æœæ˜¯ç®­å¤´å‡½æ•°ï¼ŒthisæŒ‡å‘window

ç¤ºä¾‹ï¼š

```js
var name = 'è¾¾è¾¾å‰ç«¯';

var da1 = {
    name: 'dada1',
    fun1: function() { // æ™®é€šå‡½æ•°
        console.log(this.name);
    },
    fun2: () => console.log(this.name); // ç®­å¤´å‡½æ•°
    fun3: function() { // æ™®é€šå‡½æ•°
        return function() { // åŒ¿åå‡½æ•°ï¼Œæ™®é€šå‡½æ•°
            console.log(this.name);
        }
    },
    fun4: function() { // æ™®é€šå‡½æ•°
        return () => { // ç®­å¤´å‡½æ•°
            console.log(this.name);
        }
    }
}

var da2 = {
    name: 'dada2'
};

da1.fun1(); // å­—é¢é‡da1, æ™®é€šå‡½æ•°ï¼Œè°ƒç”¨è€…da1ï¼Œsoï¼ŒæŒ‡å‘da1ï¼Œdada1
// dada1

da1.fun1.call(da2); // this.nameé€šè¿‡.callç»‘å®šäº†da2,so,dada2
// dada2

da1.fun2(); // ç®­å¤´å‡½æ•°ï¼ŒæŒ‡å‘windowï¼Œsoï¼Œè¾¾è¾¾å‰ç«¯
// è¾¾è¾¾å‰ç«¯
da1.fun2.call(da2); // .callæƒ³æ”¹å˜æŒ‡å‘ï¼Œä½†æ— æ•ˆï¼Œè¾¾è¾¾å‰ç«¯
// è¾¾è¾¾å‰ç«¯

da1.fun3()(); // åŒ¿åå‡½æ•°ï¼ŒæŒ‡å‘windowï¼Œè¾¾è¾¾å‰ç«¯
da1.fun3.call(da2); // è¿”å›åŒ¿åå‡½æ•°ï¼ŒæŒ‡å‘windowï¼Œè¾¾è¾¾å‰ç«¯
da1.fun3().call(da2); // 

da1.fun3() // é€šè¿‡.callç»‘å®šda2ï¼Œè¿”å›è¿™ä¸ªæ™®é€šå‡½æ•°ï¼Œç»‘å®šda2ï¼Œso,dada2
//
() {
      console.log(this.name)
    }
//

// dada2

//
function() { // æ™®é€šå‡½æ•°
    return function() { // åŒ¿åå‡½æ•°ï¼Œæ™®é€šå‡½æ•°
        console.log(this.name);
    }
},
//

da1.fun4()(); // thisæŒ‡å‘å®šä¹‰æ—¶ï¼Œda1ï¼Œsoï¼Œdada1
// dada1

da1.fun4.call(da2)(); // ä¸€ä¸ªfun4é€šè¿‡ç»‘å®šda2ï¼Œå†è¿è¡Œ()ï¼Œé‚£ä¹ˆfunction() { é‡Œçš„è¿”å›ç®­å¤´å‡½æ•° } ;å¤–å±‚functionç»‘å®šäº†æŒ‡å‘da2ï¼Œdada2
// dada2

da1.fun4().call(da2); // å®šä¹‰æ—¶ï¼Œfun4()ï¼Œè¿è¡Œäº†ï¼Œthis.nameä¸­è¿”å› dada1
// dada1
```

```js
var name = 'è¾¾è¾¾å‰ç«¯';
function dada(name) {
    this.name = name;
    this.fun1 = function() {
        console.log(this.name);
    },
    this.fun2 = () => console.log(this.name),
    this.fun3 = function() {
        return function() {
            console.log(this.name)
        }
    }ï¼Œ
    this.fun4 = function() {
        return () => {
            console.log(this.name)
        }
    }
}

var da1 = new dada('1');
var da2 = new dada('2');

da1.fun1(); // new ç»‘å®šäº†dadaï¼Œ1
da1.fun1.call(da2); // ç»‘å®šäº† da2 ï¼Œ 2

da1.fun2(); // ç®­å¤´å‡½æ•°ï¼Œå¤–å±‚è¿˜æ˜¯dada ,new dadaç»‘å®šdadaï¼Œ1
da1.fun2.call(da2); // .callæƒ³æ”¹å˜thisæŒ‡å‘ï¼Œä½†æ˜¯å¯¹äºç®­å¤´å‡½æ•°æ— æ•ˆï¼Œ1

da1.fun3()(); // è¿”å›ä¸€ä¸ªæ™®é€šå‡½æ•°ï¼ŒthisæŒ‡å‘windowï¼Œè¾¾è¾¾å‰ç«¯
da1.fun3.call(da2)(); // ç»‘å®šda2,ä½†æ˜¯ï¼Œä¸€æ ·æŒ‡å‘windowï¼Œè¾¾è¾¾å‰ç«¯
da1.fun3().call(da2); // ç»‘å®šda2,è¿”å›è¿è¡Œ()ï¼Œç»‘å®šda2ï¼ŒthisæŒ‡å‘da2ï¼Œ2
// da1.fun3()
Æ’ () {
      console.log(this.name)
    }
//

da1.fun4()(); // è¿”å›ç®­å¤´å‡½æ•°ï¼Œè°ƒç”¨da1ï¼ŒæŒ‡å‘å¤–å±‚da1ï¼Œ1
// da1.fun4();
// ->è¿”å›
() => {
    console.log(this.name)
}

da1.fun4.call(da2)(); // .call()ç»‘å®šäº†da2ï¼Œè°ƒç”¨()ï¼Œå¤–å±‚æ”¹å˜ä¸ºda2ï¼Œ2
da1.fun4().call(da2);
// da1.fun4();
// ->è¿”å›
() => {
    console.log(this.name)
}
// å®šä¹‰æ—¶ï¼ŒæŒ‡å‘äº†da1ï¼Œnew dada('1')æ–°å¯¹è±¡ï¼Œsoï¼Œä¸º1
```

```js
var name = 'è¾¾è¾¾å‰ç«¯'
function Person (name) {
  this.name = name
  this.obj = {
    name: 'obj',
    fun1: function () {
      return function () {
        console.log(this.name)
      }
    },
    fun2: function () {
      return () => {
        console.log(this.name)
      }
    }
  }
}
var da1 = new Person('1')
var da2 = new Person('2')

da1.obj.fun1()(); // è¾¾è¾¾å‰ç«¯ï¼Œ åŒ¿åå‡½æ•°ï¼ŒthisæŒ‡å‘å¤–å±‚windowï¼ŒåŒ¿åå‡½æ•°æŒ‡å‘window

da1.obj.fun1.call(da2)(); // è¾¾è¾¾å‰ç«¯ï¼Œ è°ƒç”¨æ™®é€šå‡½æ•°ï¼Œç»‘å®šæ”¹å˜ç¬¬ä¸€å±‚å‡½æ•°thisï¼Œå†da2ä¸­çš„åŒ¿åå‡½æ•°è¿˜æ˜¯æŒ‡å‘äº†å¤–å±‚window

da1.obj.fun1().call(da2); // 2 ,è¿è¡Œäº†fun1()æ™®é€šå‡½æ•°ï¼Œè¿”å›åŒ¿åå‡½æ•°ï¼Œç»‘å®šäº†da2ï¼Œæ”¹å˜äº†åŒ¿åå‡½æ•°å†…çš„thisï¼Œsoï¼Œä¸º2

da1.obj.fun2()(); // objï¼Œæ™®é€šå‡½æ•°å†…çš„è¿”å›ç®­å¤´å‡½æ•°ï¼Œç®­å¤´å‡½æ•°å®šä¹‰æ—¶çš„thisæŒ‡å‘çš„æ—¶objï¼Œsoï¼Œè¿”å›ç®­å¤´å‡½æ•°å†…çš„this.nameä¸º obj

da1.obj.fun2.call(da2)(); // 2 fun2ï¼Œä¸ºfunction(){...}ï¼Œç»‘å®šï¼Œæ”¹å˜äº†ç¬¬ä¸€å±‚çš„thisï¼ŒæŒ‡å‘äº†da2ï¼Œsoï¼Œ2

da1.obj.fun2().call(da2); // obj ç®­å¤´å‡½æ•°æ— æ•ˆï¼Œsoï¼Œobj
```

```js
function fun() {
    console.log(this.a); // this.a å¤–å±‚windowï¼Œda
};
var a = 'da';
(function(){
    // è¿™é‡Œçš„thisï¼ŒæŒ‡å‘windowï¼Œthisåœ¨ä¸‹é¢çš„use strictä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œä¸ºundefined
    'use strict';
    fun(); // æ™®é€šå‡½æ•°è°ƒç”¨ // da
    // this.fun(); è¿™æ ·çš„è¯å°±ä¼šæŠ¥é”™
})();
```

### thisçš„æŒ‡å‘

ç¤ºä¾‹ï¼š

```js
function dada() {
    this.a = 'da'; // thisæŒ‡å‘windowï¼Œwindowä¸‹ window.a = 'da'
    console.log(this.a); // window.a
}
dada(); // da 
```

> å‡½æ•°dadaä¸­çš„thisï¼Œåœ¨å‡½æ•°è¢«è°ƒç”¨æ—¶ç¡®å®šï¼ŒæŒ‡å‘å‡½æ•°å½“å‰è¿è¡Œçš„ç¯å¢ƒ

ç¤ºä¾‹ï¼š

```js
var a = 'da';
function da() {
    console.log(this.a);
};

var obj = {
    a: 'da1',
    fun: da
};

obj.fun(); // da1
```

å¯¹è±¡æ–¹æ³•è°ƒç”¨ï¼ŒæŒ‡å‘è¿™ä¸ªå¯¹è±¡obj

![](https://user-gold-cdn.xitu.io/2020/6/11/172a10d7684a0a4f?w=549&h=344&f=png&s=24890)

### callæ¨¡æ‹Ÿå®ç°

ç¤ºä¾‹ï¼š

```js
var obj = {
    name: 'dada'
};

function fun() {
    console.log(this.name); // window.name
};

fun.call(obj); // ç»‘å®šè¿™ä¸ªå¯¹è±¡objï¼Œdada
```

```js
// æƒ³è±¡ä¸€ä¸‹æ”¹å˜

var obj = {
    // å¯¹è±¡
    name: 'dada', // å±æ€§
    fun: function() {
        // æ™®é€šå‡½æ•°
        console.log(this.name); // obj.fun() - å¯¹è±¡objè°ƒç”¨fun() dada
    }
}
```

```js
obj.fun = å‡½æ•°ï¼ˆèµ‹å€¼ä¸€ä¸ªå‡½æ•°ï¼‰// å°†å‡½æ•°è®¾ä¸ºå¯¹è±¡çš„å±æ€§
obj.fun()

delete obj.fun è¿™ä¸ªå±æ€§

var obj = {
    name: 'dada'
};

function fun() {
    console.log(this.name); // window.name
};

fun.call(obj); // ç»‘å®šè¿™ä¸ªå¯¹è±¡objï¼Œdada
```

çœ‹ç€ä¸Šé¢çš„å†™ä¸‹é¢çš„æ–¹æ³•ï¼š

```js
Function.prototype.myCall = function(ä¸€ä¸ªå¯¹è±¡context) {
    context.fun = this; // è¿™ä¸€æ­¥çš„thisï¼ŒæŒ‡ä»£dada()å‡½æ•°
    context.fun();
    delete context.fun;
}

var obj = {
    name: 'dada'
};

function dada() {
    console.log(this.name); 
};

dada.myCall(obj); // å¯¹è±¡objï¼Œç»‘å®šè¿™ä¸ªå¯¹è±¡,thisï¼Œcontext.fun = this
```

![](https://user-gold-cdn.xitu.io/2020/6/11/172a12393ebde735?w=415&h=341&f=png&s=19668)

```js
// æ¨¡æ‹Ÿä¼ å‚é—®é¢˜call
var obj = {
    value: 'dada'
};

function fun(name, age) {
    console.log(name)
    console.log(age)
    console.log(this.value);
}

fun.call(obj, 'da', 12);
// da
// 12
// dada
```

`arguments`æ˜¯ç±»æ•°ç»„å¯¹è±¡

```js
çœ‹çœ‹arguments

arguments = {
    0: obj,
    1: 'da',
    2: 12,
    length: 3
}
```
ä¸‹é¢ä¸€æ­¥æ˜¯ä¸ºäº†å–å‡ºå‚æ•°ï¼š

![](https://user-gold-cdn.xitu.io/2020/6/11/172a1341fe236391?w=407&h=92&f=png&s=5982)

callåŸæ–¹æ³•ï¼Œè°ƒç”¨æ˜¯åˆ†å¼€çš„

![](https://user-gold-cdn.xitu.io/2020/6/11/172a1344e4fc4562?w=230&h=46&f=png&s=2214)

> JavaScript eval() å‡½æ•°

å®šä¹‰å’Œç”¨æ³•

> eval() å‡½æ•°è®¡ç®— JavaScript å­—ç¬¦ä¸²ï¼Œå¹¶æŠŠå®ƒä½œä¸ºè„šæœ¬ä»£ç æ¥æ‰§è¡Œã€‚

å¦‚æœå‚æ•°æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œeval() å‡½æ•°å°†æ‰§è¡Œè¡¨è¾¾å¼ã€‚å¦‚æœå‚æ•°æ˜¯Javascriptè¯­å¥ï¼Œeval()å°†æ‰§è¡Œ Javascript è¯­å¥ã€‚

```js
eval(string)
```

![](https://user-gold-cdn.xitu.io/2020/6/11/172a135de1849d17?w=718&h=402&f=png&s=22638)

```js
Function.prototype.myCall = function(context) {
    context.fun = this;
    var args = [];
    for(var i = 1, len = arguments.length; i < len; i++) {
        args.push('arguments[' + i + ']');
    }
    eval('context.fun(' + args +')');
    delete context.fun;
}
```

æ³¨æ„ï¼šå‚æ•°å¯ä»¥ä¸ºnull

```js
var name = 'dada';
function fun() {
    console.log(this.name);
}
fun.call(null); // thisæŒ‡å‘windowï¼Œdada
```
soæ”¹ä¸€ä¸‹

```js
Function.prototype.myCall = function (context) {
    var context = context || window;
    context.fun = this;
    var args = [];
    for(var i = 1, len = arguments.length; i < len; i++) {
        args.push('arguments[' + i + ']');
    }
    var result = eval('context.fun(' + args +')');
    delete context.fun
    return result;
}
```

### applyæ¨¡æ‹Ÿå®ç°

ç¤ºä¾‹ï¼š

```js
ä¼ å…¥ä¸€ä¸ªå¯¹è±¡ï¼Œå’Œæ•°ç»„
ä»£ç æ¥è‡ªäº@æ˜é‡‘å†´ç¾½

Function.prototype.apply = function (context, arr) {
    var context = Object(context) || window;
    context.fn = this;

    var result;
    if (!arr) {
        result = context.fn();
    }
    else {
        var args = [];
        for (var i = 0, len = arr.length; i < len; i++) {
            args.push('arr[' + i + ']');
        }
        result = eval('context.fn(' + args + ')')
    }

    delete context.fn
    return result;
}
```

![](https://user-gold-cdn.xitu.io/2020/6/11/172a142ce80795eb?w=554&h=48&f=png&s=5749)

### bindæ¨¡æ‹Ÿå®ç°

bindç»‘å®šå‡½æ•°ï¼Œç‰¹ç‚¹ï¼Œè¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œå¯ä»¥ä¼ å‚

ç¤ºä¾‹ï¼š

```js
var obj = {
    name: 'da';
};

function fun() {
    console.log(this.name);
}

// è¿”å›ä¸€ä¸ªå‡½æ•°
var da1 = fun.bind(obj);

da1(); // da
```

bind()æ–¹æ³•åˆ›å»ºä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œåœ¨bind()è¢«è°ƒç”¨æ—¶ï¼Œæ–°å‡½æ•°çš„thisè¢«æŒ‡å‘bind()çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œç»‘å®šå¯¹è±¡ï¼Œå…¶ä½™å‚æ•°å°†æ˜¯æ–°å‡½æ•°çš„å‚æ•°ã€‚

bindæ”¹å˜å‡½æ•°thisçš„æŒ‡å‘ï¼Œä½†bindå¹¶ä¸ä¼šç«‹å³æ‰§è¡Œå‡½æ•°ï¼Œè€Œæ˜¯è¿”å›ä¸€ä¸ªç»‘å®šäº†thisçš„æ–°å‡½æ•°ã€‚

æ¨¡æ‹Ÿå®ç°ï¼š

æ¨¡æ‹Ÿå®ç°ç¬¬ä¸€æ­¥ï¼š

```js
Function.prototype.myBind = function(context){
    var that = this
    return function(){
        return that.apply(context)
    }
}

// å†™æ³•2

Function.prototype.bind_ = function (obj) {
    var fn = this;
    return function () {
        fn.apply(obj);
    };
};
```

æ¨¡æ‹Ÿå®ç°ç¬¬äºŒæ­¥:æ”¯æŒå‡½æ•°ä¼ å‚

```js
Function.prototype.myBind = function (context) {
    var that = this; // å‡½æ•°
    var args = Array.prototype.slice.call(arguments, 1);
    return function () {
        var bindArgs = Array.prototype.slice.call(arguments);
        return that.apply(context,args.concat(bindArgs));
    }

}

// å†™æ³•2

Function.prototype.bind_ = function (obj) {
    // ç¬¬0ä½æ˜¯thisï¼Œæ‰€ä»¥ä»ç¬¬ä¸€ä½å¼€å§‹
    var args = Array.prototype.slice.call(arguments, 1);
    var fn = this;
    return function () {
        fn.apply(obj, args);
    };
};

Function.prototype.bind_ = function (obj) {
    var args = Array.prototype.slice.call(arguments, 1);
    var fn = this;
    return function () {
        // äºŒæ¬¡è°ƒç”¨
        var params = Array.prototype.slice.call(arguments); 
        
        fn.apply(obj, args.concat(params));
    };
};
```

æ–°å¢thisåˆ¤æ–­ä»¥åŠåŸå‹ç»§æ‰¿

```js
Function.prototype.bind_ = function (obj) {
    var args = Array.prototype.slice.call(arguments, 1);
    var fn = this;
    var instanceObj = function () {
        var params = Array.prototype.slice.call(arguments);
        // é€šè¿‡constructoråˆ¤æ–­è°ƒç”¨æ–¹å¼
        // ä¸ºtrue thisæŒ‡å‘å®ä¾‹ï¼Œå¦åˆ™ä¸ºobj
        fn.apply(this.constructor === fn ? this : obj, args.concat(params));
    };
    //åŸå‹é“¾ç»§æ‰¿
    instanceObj.prototype = fn.prototype;
    return instanceObj;
};
```

æ¨¡æ‹Ÿå®ç°ä¿®æ”¹ç‰ˆï¼š

```js
Function.prototype.bind = Function.prototype.bind || function (context) {
    var me = this;
    var args = Array.prototype.slice.call(arguments, 1);
    var F = function () {};
    F.prototype = this.prototype;
    var bound = function () {
        var innerArgs = Array.prototype.slice.call(arguments);
        var finalArgs = args.concat(innerArgs);
        return me.apply(this instanceof F ? this : context || this, finalArgs);
    }
    bound.prototype = new F();
    return bound;
}

// ä¿®æ”¹
Function.prototype.myBind = function(obj) {
  // è°ƒç”¨bindæ–¹æ³•çš„ä¸€å®šè¦æ˜¯ä¸€ä¸ªå‡½æ•°
  if(typeof this !== "function")  {
      throw new Error('error')
  };
  var args = Array.prototype.slice.call(arguments, 1);
  var fn = this;
  
  var fn_ = function () {};
  var instanceObj = function () {
       var params = Array.prototype.slice.call(arguments);
       fn.apply(this.constructor === fn ? this : obj, args.concat(params));
       console.log(this);
  };
   fn_.prototype = fn.prototype;
   instanceObj.prototype = new fn_();
   return instanceObj;
};
```

![](https://user-gold-cdn.xitu.io/2020/6/11/172a1918c5af66fe?w=647&h=197&f=png&s=51089)

çœ‹åˆ°äº†è¿™æ ·çš„å®ç°:(ä¸€èµ·æ¢è®¨ï¼Œæ‚¨å¯ä»¥é€šè¿‡å†™ä¸€ç¯‡æ–‡ç« æ¥ç»™æˆ‘çœ‹å“¦)

```js
bind: function bind(that) {
    var target = this;
    if (!isCallable(target)) {
        throw new TypeError('Function.prototype.bind called on incompatible ' + target);
    }
    var args = array_slice.call(arguments, 1);
    var bound;
    var binder = function () {
        if (this instanceof bound) {
            var result = target.apply(
                this,
                array_concat.call(args, array_slice.call(arguments))
            );
            if ($Object(result) === result) {
                return result;
            }
            return this;
        } else {
            return target.apply(
                that,
                array_concat.call(args, array_slice.call(arguments))
            );
        }
    };
    var boundLength = max(0, target.length - args.length);
    var boundArgs = [];
    for (var i = 0; i < boundLength; i++) {
        array_push.call(boundArgs, '$' + i);
    }
    bound = Function('binder', 'return function (' + boundArgs.join(',') + '){ return binder.apply(this, arguments); }')(binder);

    if (target.prototype) {
        Empty.prototype = target.prototype;
        bound.prototype = new Empty();
        Empty.prototype = null;
    }
    return bound;
}
```

### æ‰©å±•

MDNä¸Šçš„æ–‡æ¡£ï¼š

> bind()æ–¹æ³•åˆ›å»ºä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œå½“è¢«è°ƒç”¨æ—¶ï¼Œå°†å…¶thiså…³é”®å­—è®¾ç½®ä¸ºæä¾›çš„å€¼ï¼Œåœ¨è°ƒç”¨æ–°å‡½æ•°æ—¶ï¼Œåœ¨ä»»ä½•æä¾›ä¹‹å‰æä¾›è¦ç»™ç»™å®šçš„å‚æ•°åºåˆ—

> apply()æ–¹æ³•è°ƒç”¨ä¸€ä¸ªå‡½æ•°ï¼Œå…¶å…·æœ‰ä¸€ä¸ªæŒ‡å®šçš„thisæŒ‡ï¼Œä»¥åŠä½œä¸ºä¸€ä¸ªæ•°ç»„æä¾›çš„å‚æ•°

es6æ–¹å¼ï¼Œç¤ºä¾‹ï¼š

```js
Function.protype.myCall = function(context) {
    var context = context || window;
    context.fun = this;
    var args = [];
    for(var i=1, len = arguments.length; i<len; i++) {
        args.push(arguments[i]);
    }
    context.fun(...args)
    delete context.fun
}
```

```js
Function.prototype.myCall = function(context,...args) {
    context = context || window;
    context.fun = this;
    let temp = context.fun(...args);
    delete context.fun;
    return temp;
}
```

æ³¨æ„ï¼šæ°¸è¿œä¸è¦ä½¿ç”¨ evalï¼

![](https://user-gold-cdn.xitu.io/2020/6/11/172a14e6789365a8?w=710&h=364&f=png&s=85575)

### jsä¸­çš„new()

è¯·ä½ è®²ä¸€ä¸‹ï¼Œåœ¨jsä¸­ä½¿ç”¨newæ“ä½œç¬¦å…·ä½“åšäº†ä»€ä¹ˆäº‹æƒ…

1ã€åˆ›å»ºä¸€ä¸ªç©ºçš„å¯¹è±¡

2ã€é“¾æ¥åˆ°åŸå‹

3ã€ç»‘å®šthisæŒ‡å‘ï¼Œæ‰§è¡Œæ„é€ å‡½æ•°

4ã€ç¡®ä¿è¿”å›çš„æ˜¯å¯¹è±¡

ç¤ºä¾‹ï¼š

```js
var obj = new da();

var obj = {};
obj.__proto__ = da.prototype;
da.call(obj);
```

```js
function A(){}
var a = new A();
a.__proto__ === A.prototype //true

// åŸå‹é“¾
	
A.__proto__ === Function.prototype //true
```

è¡¥å……ï¼šprototypeå’Œ`__proto__`

æ¯ä¸€ä¸ªå‡½æ•°éƒ½æœ‰ä¸€ä¸ªprototypeçš„å±æ€§ï¼Œæ¯ä¸€ä¸ªç”±è¯¥å‡½æ•°å®ä¾‹åŒ–çš„å¯¹è±¡éƒ½åŒ…å«ä¸€ä¸ªéšå¼æŒ‡é’ˆï¼ˆ`__proto__`ï¼‰æŒ‡å‘è¯¥å‡½æ•°çš„prototypeå±æ€§

> newè¿ç®—ç¬¦

- åˆ›å»ºä¸€ä¸ªç©ºçš„JavaScriptå¯¹è±¡`{}`
- é“¾æ¥è¯¥å¯¹è±¡åˆ°å¦ä¸€ä¸ªå¯¹è±¡
- å°†æ–°åˆ›å»ºçš„å¯¹è±¡ä½œä¸ºthisçš„ä¸Šä¸‹æ–‡
- å¦‚æœè¯¥å‡½æ•°æ²¡æœ‰è¿”å›å¯¹è±¡ï¼Œåˆ™è¿”å›this

ç¤ºä¾‹ï¼š

```js
function da(name, age, year) {
  this.name = name;
  this.age = age;
  this.year = year;
}

const da1 = new da('dada', '12', 2333);

console.log(da1.name);
// expected output: "dada"
```

```js
function create(){
	// åˆ›å»ºä¸€ä¸ªç©ºå¯¹è±¡  
	let obj = new Object();
	// è·å–æ„é€ å‡½æ•°
	let Constructor = [].shift.call(arguments);
	// é“¾æ¥åˆ°åŸå‹
	obj.__proto__ = Constructor.prototype;
	// ç»‘å®šthis
	let result = Constructor.apply(obj,arguments);
	// è¿”å›æ–°å¯¹è±¡
	return typeof result === "object" ? result : obj; 
	// let obj = new Object();
}
```

`Object.create` çš„æ¨¡æ‹Ÿå®ç°ï¼š

```js
Object.create = function( o ) {
    function f(){}
    f.prototype = o;
    return new f;
};
```

### æ„Ÿè°¢æå‡ºçš„é”™è¯¯

ä¸åˆ†é¡ºåº

[æ˜é‡‘ç½‘å‹ï¼šè‡ªçŸ¥æ— çŸ¥](https://juejin.im/user/5a05dee25188254a701e85b4)

[å°å°å¤–æ˜Ÿäººáƒ¦](https://juejin.im/user/5be55122f265da615f76c71d)

### å‚è€ƒæ–‡çŒ®

å¦‚æœé™ä¸‹å¿ƒæ¥çœ‹çš„è¯æ˜¯ä¸€å®šä¼šæœ‰æ”¶è·çš„ï¼

[ä¸ç”¨callå’Œapplyæ–¹æ³•æ¨¡æ‹Ÿå®ç°ES5çš„bindæ–¹æ³•](https://github.com/jawil/blog/issues/16)

[ã€å»ºè®®ğŸ‘ã€‘å†æ¥40é“thisé¢è¯•é¢˜é…¸çˆ½ç»§ç»­(1.2wå­—ç”¨æ‰‹æ•´ç†)](https://juejin.im/post/5e6358256fb9a07cd80f2e70#heading-26)

[JavaScriptæ·±å…¥ä¹‹callå’Œapplyçš„æ¨¡æ‹Ÿå®ç°](https://juejin.im/post/5907eb99570c3500582ca23c)

[JavaScriptæ·±å…¥ä¹‹bindçš„æ¨¡æ‹Ÿå®ç°](https://juejin.im/post/59093b1fa0bb9f006517b906#heading-0)

[é¢è¯•å®˜é—®ï¼šèƒ½å¦æ¨¡æ‹Ÿå®ç°JSçš„bindæ–¹æ³•](https://juejin.im/post/5bec4183f265da616b1044d7)

### å…³äº

ä½œè€…ï¼šå¸¸æ··è¿¹äºå‰ç«¯æ±Ÿæ¹–ã€‚
[ä¸ªäººåšå®¢](http://www.dadaqianduan.cn/#/)
[github blog](https://github.com/webVueBlog/vueblog)ï¼Œæ±‚ä¸ªstar^_^~

### å¾®ä¿¡å…¬ä¼—å· è¾¾è¾¾å‰ç«¯

å¯èƒ½æ¯”è¾ƒæœ‰è¶£çš„å¾®ä¿¡å…¬ä¼—å·ï¼Œé•¿æŒ‰æ‰«ç å…³æ³¨ã€‚ä¹Ÿå¯ä»¥åŠ å¾®ä¿¡ xiaoda0423ï¼Œæ³¨æ˜æ¥æºï¼Œæ‹‰æ‚¨è¿›ã€è¾¾è¾¾å‰ç«¯äº¤æµç¾¤ã€‘ã€‚-æ³¨æ˜æ¥æº

![](https://user-gold-cdn.xitu.io/2020/5/28/17258db8e4af50d1?w=900&h=500&f=png&s=195006)